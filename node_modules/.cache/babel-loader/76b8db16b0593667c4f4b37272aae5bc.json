{"ast":null,"code":"import _objectSpread from\"/Users/admin/Desktop/SourceDevVieON/LiveEvent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/Users/admin/Desktop/SourceDevVieON/LiveEvent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/admin/Desktop/SourceDevVieON/LiveEvent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{CButton,CModal,CModalBody,CModalHeader}from\"@coreui/react\";import CIcon from\"@coreui/icons-react\";import{useDispatch,useSelector}from\"react-redux\";import{getContentProviderById}from\"../../../actions/content\";import AdsContentItem from\"../ContentList/ItemContentList/AdsContentItem\";import NameContentProviderItem from\"../ContentList/ItemContentList/NameContentProviderItem\";import StatusContentItem from\"../ContentList/ItemContentList/StatusContentItem\";import contentApi from\"../../../apis/contentApi\";import{parsedIdAdsGroups,parsedIdContentProvider}from\"../../../helpers/common\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PopupEditContent=function PopupEditContent(props){var _dataContent$CONTENT_;var modal=props.modal,setPopupEdit=props.setPopupEdit,listAdsGroups=props.listAdsGroups,dataContentList=props.dataContentList,getListAdsGroups=props.getListAdsGroups,currentItemAds=props.currentItemAds,currentItem=props.currentItem,currentItemContentProvider=props.currentItemContentProvider,currentPage=props.currentPage,rowPerPage=props.rowPerPage,setCurrentPageList=props.setCurrentPageList,keyWord=props.keyWord,category=props.category,type=props.type,idContentProvider=props.idContentProvider,idAdsGroup=props.idAdsGroup,handleScroll=props.handleScroll;var _ref=currentItemAds||{},status=_ref.status,group=_ref.group;var idProvider=currentItemContentProvider===null||currentItemContentProvider===void 0?void 0:currentItemContentProvider.id;var _ref2=currentItem||{},contentProviders=_ref2.contentProviders;var arrIdContentProvider=parsedIdContentProvider(contentProviders);var arrIdInStreamAds=parsedIdAdsGroups(contentProviders);var dispatch=useDispatch();var dataContent=useSelector(function(state){return state===null||state===void 0?void 0:state.Content;});var nameItemProvider=dataContent===null||dataContent===void 0?void 0:(_dataContent$CONTENT_=dataContent.CONTENT_PROVIDER)===null||_dataContent$CONTENT_===void 0?void 0:_dataContent$CONTENT_.name;var itemContentProvider=dataContent===null||dataContent===void 0?void 0:dataContent.CONTENT_PROVIDER;useEffect(function(){setStatus(status);setGroupAds(group);setNameProvider(nameItemProvider);},[status,group,nameItemProvider]);useEffect(function(){if(idProvider)dispatch(getContentProviderById(idProvider));// eslint-disable-next-line react-hooks/exhaustive-deps\n},[currentItemContentProvider]);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),idContentProviders=_useState2[0],setIdContentProvider=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),idInStreamAds=_useState4[0],setIdInStreamAds=_useState4[1];var _useState5=useState({id:'',status:null}),_useState6=_slicedToArray(_useState5,2),elementAds=_useState6[0],setElementAds=_useState6[1];useEffect(function(){if(elementAds===null||elementAds===void 0?void 0:elementAds.id)handleChangeIdAdsGroups(elementAds);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[elementAds===null||elementAds===void 0?void 0:elementAds.id,elementAds===null||elementAds===void 0?void 0:elementAds.status]);var onChangeContentProvider=function onChangeContentProvider(item){var arr=_toConsumableArray(arrIdContentProvider);arr=arr.filter(function(ite){return ite!==(itemContentProvider===null||itemContentProvider===void 0?void 0:itemContentProvider.id);});arr.push(item===null||item===void 0?void 0:item.id);setIdContentProvider(arr);};var handleChangeIdAdsGroups=function handleChangeIdAdsGroups(elm){var _idAds$;var idAds=_toConsumableArray(arrIdInStreamAds);idAds=idAds.filter(function(ite){return(ite===null||ite===void 0?void 0:ite.id)!==(currentItemAds===null||currentItemAds===void 0?void 0:currentItemAds.id);});idAds.push(elm);if(((_idAds$=idAds[0])===null||_idAds$===void 0?void 0:_idAds$.id)===undefined){idAds.splice(0,1);setIdInStreamAds(idAds);}else{setIdInStreamAds(idAds);}};var onChangeAdsItem=function onChangeAdsItem(item){setElementAds(_objectSpread(_objectSpread({},elementAds),{},{id:item===null||item===void 0?void 0:item.id,status:item===null||item===void 0?void 0:item.status}));handleChangeIdAdsGroups(elementAds);};var onChangeStatus=function onChangeStatus(item){setElementAds(_objectSpread(_objectSpread({},elementAds),{},{status:item===null||item===void 0?void 0:item.status}));handleChangeIdAdsGroups(elementAds);};var _useState7=useState(status||''),_useState8=_slicedToArray(_useState7,2),currentStatus=_useState8[0],setStatus=_useState8[1];var _useState9=useState(group||''),_useState10=_slicedToArray(_useState9,2),currentGroup=_useState10[0],setGroupAds=_useState10[1];var _useState11=useState(nameItemProvider||''),_useState12=_slicedToArray(_useState11,2),currentNameProvider=_useState12[0],setNameProvider=_useState12[1];var handleClose=function handleClose(){setPopupEdit(false);};var handleSave=function handleSave(){var idContent=currentItem===null||currentItem===void 0?void 0:currentItem.id;contentApi===null||contentApi===void 0?void 0:contentApi.editContent(idContent,idContentProviders,idInStreamAds).then(function(res){if(res===null||res===void 0?void 0:res.success){contentApi===null||contentApi===void 0?void 0:contentApi.getContentList(currentPage-1,rowPerPage,keyWord,category,type,idContentProvider,idAdsGroup).then(function(resList){var data=resList===null||resList===void 0?void 0:resList.data;if(resList===null||resList===void 0?void 0:resList.success){setCurrentPageList(data===null||data===void 0?void 0:data.items);}});setPopupEdit(false);}});};return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(CModal// size={'lg'}\n,{show:modal,onClose:handleClose,centered:true,closeOnBackdrop:false,style:{minWidth:'555px'},children:[/*#__PURE__*/_jsx(CModalHeader,{style:{backgroundColor:'#646464'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-100 d-flex justify-content-between align-items-center\",style:{color:\"#FFF\"},children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mb-0\",children:\"S\\u1EEDa Content\"}),/*#__PURE__*/_jsx(CButton,{className:\"p-0 shadow-none\",onClick:handleClose,children:/*#__PURE__*/_jsx(CIcon,{name:\"cil-x\",style:{color:\"#FFF\"}})})]})}),/*#__PURE__*/_jsxs(CModalBody,{children:[/*#__PURE__*/_jsxs(\"div\",{className:'d-flex flex-row',children:[/*#__PURE__*/_jsx(NameContentProviderItem,{dataContentList:dataContentList,nameItemProvider:currentNameProvider,setNameProvider:setNameProvider,onChangeContentProvider:onChangeContentProvider,arrIdContentProvider:arrIdContentProvider,getListAdsGroups:getListAdsGroups,handleScroll:handleScroll}),/*#__PURE__*/_jsx(AdsContentItem,{listAdsGroup:listAdsGroups,groupName:currentGroup,setGroupAds:setGroupAds,onChangeAdsItem:onChangeAdsItem}),/*#__PURE__*/_jsx(StatusContentItem,{onChangeStatus:onChangeStatus,status:currentStatus,setStatus:setStatus})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-end mt-3\",children:/*#__PURE__*/_jsx(CButton,{className:\"pl-4 pr-4\",color:\"success\",onClick:handleSave,children:\"L\\u01B0u\"})})]})]})});};export default PopupEditContent;","map":{"version":3,"sources":["/Users/admin/Desktop/SourceDevVieON/LiveEvent/src/views/instream-ads/Popup/PopupEditContent.js"],"names":["React","useEffect","useState","CButton","CModal","CModalBody","CModalHeader","CIcon","useDispatch","useSelector","getContentProviderById","AdsContentItem","NameContentProviderItem","StatusContentItem","contentApi","parsedIdAdsGroups","parsedIdContentProvider","PopupEditContent","props","modal","setPopupEdit","listAdsGroups","dataContentList","getListAdsGroups","currentItemAds","currentItem","currentItemContentProvider","currentPage","rowPerPage","setCurrentPageList","keyWord","category","type","idContentProvider","idAdsGroup","handleScroll","status","group","idProvider","id","contentProviders","arrIdContentProvider","arrIdInStreamAds","dispatch","dataContent","state","Content","nameItemProvider","CONTENT_PROVIDER","name","itemContentProvider","setStatus","setGroupAds","setNameProvider","idContentProviders","setIdContentProvider","idInStreamAds","setIdInStreamAds","elementAds","setElementAds","handleChangeIdAdsGroups","onChangeContentProvider","item","arr","filter","ite","push","elm","idAds","undefined","splice","onChangeAdsItem","onChangeStatus","currentStatus","currentGroup","currentNameProvider","handleClose","handleSave","idContent","editContent","then","res","success","getContentList","resList","data","items","minWidth","backgroundColor","color"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react'\nimport {\n  CButton,\n  CModal,\n  CModalBody,\n  CModalHeader,\n} from \"@coreui/react\";\nimport CIcon from \"@coreui/icons-react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {getContentProviderById} from \"../../../actions/content\";\nimport AdsContentItem from \"../ContentList/ItemContentList/AdsContentItem\";\nimport NameContentProviderItem from \"../ContentList/ItemContentList/NameContentProviderItem\";\nimport StatusContentItem from \"../ContentList/ItemContentList/StatusContentItem\";\nimport contentApi from \"../../../apis/contentApi\";\nimport {parsedIdAdsGroups, parsedIdContentProvider} from \"../../../helpers/common\"\n\n\nconst PopupEditContent = (props) => {\n  const {\n    modal,\n    setPopupEdit,\n    listAdsGroups,\n    dataContentList,\n    getListAdsGroups,\n\n    currentItemAds,\n    currentItem,\n    currentItemContentProvider,\n    currentPage, rowPerPage, setCurrentPageList,\n    keyWord,\n    category,\n    type,\n    idContentProvider,\n    idAdsGroup,\n    handleScroll\n  } = props\n  const  { status, group} = currentItemAds || {}\n  const idProvider = currentItemContentProvider?.id\n  const {contentProviders} = currentItem || {}\n\n  const arrIdContentProvider = parsedIdContentProvider(contentProviders)\n  const arrIdInStreamAds = parsedIdAdsGroups(contentProviders)\n\n  const dispatch  = useDispatch()\n  const dataContent = useSelector(state => state?.Content)\n  const nameItemProvider =  dataContent?.CONTENT_PROVIDER?.name\n  const itemContentProvider = dataContent?.CONTENT_PROVIDER\n\n  useEffect(()=>{\n    setStatus(status)\n    setGroupAds(group)\n    setNameProvider(nameItemProvider)\n\n  },[status, group, nameItemProvider ])\n\n\n  useEffect(()=> {\n    if (idProvider) dispatch(getContentProviderById(idProvider))\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  },[currentItemContentProvider])\n\n\n  const [idContentProviders, setIdContentProvider] = useState( [])\n  const [idInStreamAds, setIdInStreamAds] = useState([])\n\n  const [elementAds, setElementAds] = useState({\n    id: '',\n    status: null\n  })\n\n\n  useEffect(()=> {\n    if (elementAds?.id) handleChangeIdAdsGroups(elementAds)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  },[elementAds?.id, elementAds?.status])\n\n  const onChangeContentProvider = (item) => {\n    let arr = [...arrIdContentProvider]\n    arr = arr.filter(ite => ite !== itemContentProvider?.id)\n    arr.push(item?.id)\n    setIdContentProvider(arr)\n  }\n\n\n  const handleChangeIdAdsGroups = (elm) => {\n    let idAds = [...arrIdInStreamAds]\n    idAds = idAds.filter(ite => ite?.id !== currentItemAds?.id)\n    idAds.push(elm)\n    if (idAds[0]?.id === undefined){\n      idAds.splice(0,1)\n      setIdInStreamAds(idAds)\n    } else {\n      setIdInStreamAds(idAds)\n    }\n  }\n  const onChangeAdsItem = (item) => {\n    setElementAds({...elementAds, id: item?.id, status: item?.status})\n    handleChangeIdAdsGroups(elementAds)\n  }\n\n  const onChangeStatus = (item) => {\n    setElementAds({...elementAds, status: item?.status})\n    handleChangeIdAdsGroups(elementAds)\n  }\n\n\n  const [currentStatus, setStatus] = useState(status || '')\n  const [currentGroup, setGroupAds] = useState(group || '')\n  const [currentNameProvider, setNameProvider] = useState(nameItemProvider || '')\n\n  const handleClose =() => {\n    setPopupEdit(false)\n  }\n  const handleSave = () => {\n    const idContent = currentItem?.id\n    contentApi?.editContent(idContent, idContentProviders, idInStreamAds).then(res=>{\n      if (res?.success){\n        contentApi?.getContentList(\n          currentPage -1,\n          rowPerPage,\n          keyWord,\n          category,\n          type,\n          idContentProvider,\n          idAdsGroup\n        ).then(\n          resList =>{\n            const data = resList?.data\n            if (resList?.success) {\n              setCurrentPageList(data?.items)\n            }\n          }\n        )\n        setPopupEdit(false)\n      }\n    })\n  }\n\n\n  return (\n    <React.Fragment>\n      <CModal\n          // size={'lg'}\n        show={modal}\n        onClose={handleClose}\n        centered={true}\n        closeOnBackdrop={false}\n        style={{minWidth: '555px'}}\n      >\n        <CModalHeader style={{ backgroundColor: '#646464' }}>\n          <div className=\"w-100 d-flex justify-content-between align-items-center\" style={{ color: \"#FFF\" }}>\n            <h4 className=\"mb-0\">Sửa Content</h4>\n            <CButton className='p-0 shadow-none' onClick={handleClose}>\n              <CIcon name=\"cil-x\" style={{ color: \"#FFF\" }}></CIcon>\n            </CButton>\n          </div>\n        </CModalHeader>\n        <CModalBody>\n          <div className={'d-flex flex-row'}>\n            <NameContentProviderItem\n              dataContentList={dataContentList}\n              nameItemProvider={currentNameProvider}\n              setNameProvider={setNameProvider}\n              onChangeContentProvider={onChangeContentProvider}\n              arrIdContentProvider={arrIdContentProvider}\n              getListAdsGroups={getListAdsGroups}\n              handleScroll={handleScroll}\n            />\n            <AdsContentItem\n              listAdsGroup={listAdsGroups}\n              groupName={currentGroup}\n              setGroupAds={setGroupAds}\n              onChangeAdsItem={onChangeAdsItem}\n            />\n            <StatusContentItem\n              onChangeStatus={onChangeStatus}\n              status={currentStatus} setStatus={setStatus}/>\n          </div>\n          <div className=\"d-flex justify-content-end mt-3\">\n            <CButton className=\"pl-4 pr-4\" color=\"success\" onClick={handleSave}>Lưu</CButton>\n          </div>\n        </CModalBody>\n      </CModal>\n    </React.Fragment>\n  )\n}\nexport default PopupEditContent\n"]},"metadata":{},"sourceType":"module"}