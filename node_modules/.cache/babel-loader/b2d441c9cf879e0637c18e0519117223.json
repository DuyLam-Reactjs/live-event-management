{"ast":null,"code":"import _regeneratorRuntime from\"/Users/admin/Desktop/SourceDevVieON/LiveEvent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/admin/Desktop/SourceDevVieON/LiveEvent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/Users/admin/Desktop/SourceDevVieON/LiveEvent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/admin/Desktop/SourceDevVieON/LiveEvent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import InStreamAdsItem from\"../CreateStreamAds/InStreamAdsItem\";import CreateContentProviderInfo from\"../CreateContentProviderInfo/CreateContentProviderInfo\";import{useDispatch,useSelector}from\"react-redux\";import{useLocation}from\"react-router\";import{getContentProviderById}from\"../../../../actions/content\";import CreateInStreamAds from\"../CreateStreamAds/CreateInStreamAds\";import inStreamAdsApi from\"../../../../apis/inStreamAdsApi\";import{parsedPageLimit}from\"../../../../helpers/common\";import TitleAds from\"../../TitleAds/TitleAds\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var queryString=require('query-string');var EditContentProvider=function EditContentProvider(){var dispatch=useDispatch();var location=useLocation();var parsedID=queryString.parse(location.search);var itemContentProvider=useSelector(function(state){return state.Content;});var dataItem=itemContentProvider===null||itemContentProvider===void 0?void 0:itemContentProvider.CONTENT_PROVIDER;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),newData=_useState2[0],setNewData=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),currentPageAds=_useState4[0],setPageAds=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),metadataAds=_useState6[0],setMetadataAds=_useState6[1];useEffect(function(){function watchScroll(){window.addEventListener(\"scroll\",handleScroll);}watchScroll();return function(){window.removeEventListener(\"scroll\",handleScroll);};});var handleScroll=function handleScroll(){var _ref=metadataAds||{},page=_ref.page,limit=_ref.limit,total=_ref.total;var maxPage=parsedPageLimit(total,limit);if((page+1)*limit>=total&&page+1>maxPage)return;setPageAds((page||0)+1);};useEffect(function(){dispatch(getContentProviderById(parsedID.id));// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);useEffect(function(){function getList(){return _getList.apply(this,arguments);}function _getList(){_getList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:inStreamAdsApi.getListInStreamAds(parsedID.id,10,currentPageAds).then(function(res){var data=res===null||res===void 0?void 0:res.data;if(res===null||res===void 0?void 0:res.success){setMetadataAds(data===null||data===void 0?void 0:data.metadata);var dataList=_toConsumableArray(newData);var newDataList=dataList.concat(data===null||data===void 0?void 0:data.items);setNewData(newDataList);}});case 1:case\"end\":return _context.stop();}}},_callee);}));return _getList.apply(this,arguments);}getList();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[currentPageAds]);return/*#__PURE__*/_jsxs(\"div\",{onScroll:handleScroll,children:[/*#__PURE__*/_jsx(TitleAds,{editContentProvider:true}),/*#__PURE__*/_jsx(CreateContentProviderInfo,{dataItem:dataItem}),/*#__PURE__*/_jsx(CreateInStreamAds,{newData:newData,setNewData:setNewData,disable:true}),(newData||[]).map(function(itemGroup,index){if(itemGroup===null)return;return/*#__PURE__*/_jsx(InStreamAdsItem,{newData:newData,setNewData:setNewData,parsedID:parsedID,itemAdsGroup:itemGroup,index:index},index);})]});};export default EditContentProvider;","map":{"version":3,"sources":["/Users/admin/Desktop/SourceDevVieON/LiveEvent/src/views/instream-ads/CreateContentProvider/EditContentProvider/EditContentProvider.js"],"names":["React","useEffect","useState","InStreamAdsItem","CreateContentProviderInfo","useDispatch","useSelector","useLocation","getContentProviderById","CreateInStreamAds","inStreamAdsApi","parsedPageLimit","TitleAds","queryString","require","EditContentProvider","dispatch","location","parsedID","parse","search","itemContentProvider","state","Content","dataItem","CONTENT_PROVIDER","newData","setNewData","currentPageAds","setPageAds","metadataAds","setMetadataAds","watchScroll","window","addEventListener","handleScroll","removeEventListener","page","limit","total","maxPage","id","getList","getListInStreamAds","then","res","data","success","metadata","dataList","newDataList","concat","items","map","itemGroup","index"],"mappings":"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","sourcesContent":["\nimport React, {useEffect, useState} from 'react'\nimport InStreamAdsItem from \"../CreateStreamAds/InStreamAdsItem\";\nimport CreateContentProviderInfo from \"../CreateContentProviderInfo/CreateContentProviderInfo\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport { useLocation} from \"react-router\";\nimport {getContentProviderById} from \"../../../../actions/content\";\nimport CreateInStreamAds from \"../CreateStreamAds/CreateInStreamAds\";\nimport inStreamAdsApi from \"../../../../apis/inStreamAdsApi\";\nimport {parsedPageLimit} from \"../../../../helpers/common\";\nimport TitleAds from \"../../TitleAds/TitleAds\";\n\n\nconst queryString = require('query-string');\n\nconst EditContentProvider = () => {\n\n\n  const dispatch = useDispatch()\n  const location = useLocation()\n  const parsedID = queryString.parse(location.search)\n\n  const itemContentProvider = useSelector(state=>state.Content)\n  const dataItem = itemContentProvider?.CONTENT_PROVIDER\n  const [newData, setNewData] = useState(  [])\n\n\n  const [currentPageAds, setPageAds] = useState(1)\n  const [metadataAds, setMetadataAds] = useState()\n  useEffect(() => {\n    function watchScroll() {\n      window.addEventListener(\"scroll\", handleScroll);\n    }\n    watchScroll()\n    return () => {\n      window.removeEventListener(\"scroll\", handleScroll);\n    }\n  })\n\n  const handleScroll = () => {\n    const { page, limit, total } = metadataAds || {}\n    let maxPage = parsedPageLimit(total, limit)\n\n    if ((page + 1) * limit >= total && (page + 1) > maxPage) return\n    setPageAds((page || 0) + 1 )\n  }\n\n  useEffect(()=>{\n    dispatch(getContentProviderById(parsedID.id))\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  },[])\n  useEffect(()=>{\n    async function getList () {\n      inStreamAdsApi.getListInStreamAds( parsedID.id, 10, currentPageAds ).then(res=>{\n        const data = res?.data\n        if (res?.success) {\n          setMetadataAds(data?.metadata)\n          let dataList = [...newData]\n          let newDataList = dataList.concat(data?.items)\n          setNewData(newDataList)\n        }\n      })\n    }\n    getList()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  },[currentPageAds])\n\n  return (\n    <div onScroll={handleScroll}>\n      <TitleAds editContentProvider/>\n      <CreateContentProviderInfo dataItem={dataItem}/>\n      <CreateInStreamAds\n        newData={newData}\n        setNewData={setNewData}\n        disable\n      />\n      { (newData || []).map((itemGroup, index)=>{\n        if (itemGroup === null) return\n        return(\n          <InStreamAdsItem\n            key={index}\n            newData={newData}\n            setNewData={setNewData}\n            parsedID={parsedID}\n            itemAdsGroup={itemGroup}\n            index={index}\n            />\n        )\n      })}\n    </div>\n\n  )\n}\n\nexport default EditContentProvider\n"]},"metadata":{},"sourceType":"module"}