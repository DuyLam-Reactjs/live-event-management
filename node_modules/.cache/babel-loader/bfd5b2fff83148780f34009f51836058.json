{"ast":null,"code":"var _jsxFileName = \"/Users/admin/Desktop/SourceDevVieON/LiveEvent/src/views/instream-ads/Popup/PopupAddVast.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { CButton, CModal, CModalBody, CModalHeader, CInput, CInputGroup } from \"@coreui/react\";\nimport CIcon from '@coreui/icons-react';\nimport { sendToast } from \"../../../helpers/common\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PopupAddVast = props => {\n  _s();\n\n  const {\n    isPreRoll,\n    vastUrl,\n    setVastUrl,\n    modal,\n    setModal\n  } = props;\n  const [bumperTime, setBumperTime] = useState({\n    hour: '00',\n    minute: '00',\n    second: '00'\n  });\n  const [data, setData] = useState(vastUrl);\n  useEffect(() => {\n    setData(vastUrl);\n  }, [vastUrl]);\n\n  const handleChangeField = event => {\n    setData({ ...data,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const handleChangeBumper = event => {\n    let value = event.target.value;\n    value = value.replace(/[^0-9]/, '');\n    value = value.replace(/[:]/, '');\n\n    if (value !== null && value.length !== 0) {\n      // lấy 6 số đầu tiên\n      value = value.match(/.{1,6}/g)[0]; // chia thành nhóm 2 số\n\n      value = value.match(/.{1,2}/g); // kiểm tra giới hạn giờ, phút, giây\n\n      switch (value.length) {\n        case 1:\n          value[0] = Number(value[0]) > 59 ? '59' : value[0];\n          setBumperTime({ ...bumperTime,\n            hour: '00',\n            minute: '00',\n            second: value[0]\n          });\n          break;\n\n        case 2:\n          value[0] = Number(value[0]) > 59 ? '59' : value[0];\n          value[1] = Number(value[1]) > 59 ? '59' : value[1];\n          setBumperTime({ ...bumperTime,\n            hour: '00',\n            minute: value[0],\n            second: value[1]\n          });\n          break;\n\n        case 3:\n          value[0] = Number(value[0]) > 23 ? '23' : value[0];\n          value[1] = Number(value[1]) > 59 ? '59' : value[1];\n          value[2] = Number(value[2]) > 59 ? '59' : value[2];\n          setBumperTime({ ...bumperTime,\n            hour: value[0],\n            minute: value[1],\n            second: value[2]\n          });\n          break;\n\n        default:\n          break;\n      }\n\n      value = value.join(\":\");\n    }\n\n    setData({ ...data,\n      bumper: value\n    });\n  };\n\n  const handleClose = () => {\n    setModal(false);\n    setData(vastUrl);\n  };\n\n  const checkBlank = str => {\n    return str == null || str.trim() === '';\n  };\n\n  const handleSave = () => {\n    let errorString = '';\n\n    if (checkBlank(data.url_1) && isPreRoll && checkBlank(data.bumper)) {\n      errorString = \"Vui lòng nhập Vast URL 01 và thông tin bumper\";\n      sendToast({\n        message: errorString\n      });\n    }\n\n    if (checkBlank(data.url_1) && !isPreRoll) {\n      errorString = \"Vui lòng nhập Vast URL 01\";\n      sendToast({\n        message: errorString\n      });\n    }\n\n    if (checkBlank(data.url_1) && isPreRoll && !checkBlank(data.bumper)) {\n      errorString = \"Vui lòng nhập Vast URL 01\";\n      sendToast({\n        message: errorString\n      });\n    }\n\n    if (isPreRoll && checkBlank(data.bumper) && !checkBlank(data.url_1)) {\n      errorString = \"Vui lòng nhập thông tin bumper\";\n      sendToast({\n        message: errorString\n      });\n    }\n\n    if (isPreRoll && !checkBlank(data.bumper) && !checkBlank(data.url_1)) {\n      setModal(false);\n      data.bumper = [bumperTime.hour, bumperTime.minute, bumperTime.second].join(\":\");\n      setVastUrl(data);\n    }\n\n    if (!isPreRoll && !checkBlank(data.url_1)) {\n      setModal(false);\n      setVastUrl(data);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(CModal, {\n      closeOnBackdrop: false,\n      show: modal,\n      onClose: handleClose,\n      centered: true,\n      children: [/*#__PURE__*/_jsxDEV(CModalHeader, {\n        style: {\n          backgroundColor: '#646464'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-100 d-flex justify-content-between align-items-center\",\n          style: {\n            color: \"#FFF\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"mb-0\",\n            children: \"Vast URL & bumper\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CButton, {\n            className: \"p-0 shadow-none\",\n            onClick: handleClose,\n            children: /*#__PURE__*/_jsxDEV(CIcon, {\n              name: \"cil-x\",\n              style: {\n                color: \"#FFF\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CModalBody, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex flex-column mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mb-1\",\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"VastURL\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 35\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }, this), dataVastURl.map((item, index) => {\n              let vastUrlItem = '';\n              const id = item === null || item === void 0 ? void 0 : item.id;\n              if (id === 1) vastUrlItem = data === null || data === void 0 ? void 0 : data.url_1;\n              if (id === 2) vastUrlItem = data === null || data === void 0 ? void 0 : data.url_2;\n              if (id === 3) vastUrlItem = data === null || data === void 0 ? void 0 : data.url_3;\n              return /*#__PURE__*/_jsxDEV(CInputGroup, {\n                className: \"mt-2\",\n                children: /*#__PURE__*/_jsxDEV(CInput, {\n                  name: 'url_' + (item === null || item === void 0 ? void 0 : item.id),\n                  type: \"text\",\n                  value: vastUrlItem || '',\n                  placeholder: 'URL 0' + (item === null || item === void 0 ? void 0 : item.id),\n                  style: {\n                    color: '#222'\n                  },\n                  onChange: handleChangeField\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 23\n                }, this)\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 21\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this), isPreRoll && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex flex-column mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mb-1\",\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Bumper\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 35\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CInputGroup, {\n              className: \"mt-1\",\n              children: /*#__PURE__*/_jsxDEV(CInput, {\n                name: \"bumper\",\n                type: \"text\",\n                value: (data === null || data === void 0 ? void 0 : data.bumper) || '',\n                placeholder: \"Enter \\u0111\\u1EC3 nh\\u1EADp. Format: mm:ss, ho\\u1EB7c hh:mm:ss\",\n                style: {\n                  color: '#222'\n                },\n                onChange: handleChangeBumper\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-content-end mt-3\",\n            children: /*#__PURE__*/_jsxDEV(CButton, {\n              className: \"pl-4 pr-4\",\n              color: \"success\",\n              onClick: handleSave,\n              children: \"L\\u01B0u\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 5\n  }, this);\n};\n\n_s(PopupAddVast, \"hG2/sRzfnxz/ehZapJwHHV4BBc0=\");\n\n_c = PopupAddVast;\nconst dataVastURl = [{\n  id: 1\n}, {\n  id: 2\n}, {\n  id: 3\n}];\nexport default PopupAddVast;\n\nvar _c;\n\n$RefreshReg$(_c, \"PopupAddVast\");","map":{"version":3,"sources":["/Users/admin/Desktop/SourceDevVieON/LiveEvent/src/views/instream-ads/Popup/PopupAddVast.js"],"names":["React","useEffect","useState","CButton","CModal","CModalBody","CModalHeader","CInput","CInputGroup","CIcon","sendToast","PopupAddVast","props","isPreRoll","vastUrl","setVastUrl","modal","setModal","bumperTime","setBumperTime","hour","minute","second","data","setData","handleChangeField","event","target","name","value","handleChangeBumper","replace","length","match","Number","join","bumper","handleClose","checkBlank","str","trim","handleSave","errorString","url_1","message","backgroundColor","color","dataVastURl","map","item","index","vastUrlItem","id","url_2","url_3"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport {\n  CButton,\n  CModal,\n  CModalBody,\n  CModalHeader,\n  CInput,\n  CInputGroup,\n} from \"@coreui/react\";\nimport CIcon from '@coreui/icons-react'\nimport {sendToast} from \"../../../helpers/common\";\n\n\nconst PopupAddVast = (props) => {\n  const { isPreRoll, vastUrl, setVastUrl, modal, setModal } = props;\n  const [bumperTime, setBumperTime] = useState({\n    hour: '00',\n    minute: '00',\n    second: '00'\n  })\n\n  const [data, setData] = useState(vastUrl)\n\n  useEffect(() => {\n    setData(vastUrl);\n  }, [vastUrl])\n\n  const handleChangeField = (event) => {\n    setData({\n      ...data,\n      [event.target.name]: event.target.value\n    });\n  }\n\n  const handleChangeBumper = (event) => {\n    let value = event.target.value;\n    value = value.replace(/[^0-9]/, '');\n    value = value.replace(/[:]/, '');\n\n    if (value !== null && value.length !== 0) {\n      // lấy 6 số đầu tiên\n      value = value.match(/.{1,6}/g)[0];\n\n      // chia thành nhóm 2 số\n      value = value.match(/.{1,2}/g);\n\n      // kiểm tra giới hạn giờ, phút, giây\n      switch (value.length) {\n        case 1:\n          value[0] = Number(value[0]) > 59 ? '59' : value[0];\n          setBumperTime({\n            ...bumperTime,\n            hour: '00',\n            minute: '00',\n            second: value[0]\n          })\n          break;\n        case 2:\n          value[0] = Number(value[0]) > 59 ? '59' : value[0];\n          value[1] = Number(value[1]) > 59 ? '59' : value[1];\n          setBumperTime({\n            ...bumperTime,\n            hour: '00',\n            minute: value[0],\n            second: value[1]\n          })\n          break;\n        case 3:\n          value[0] = Number(value[0]) > 23 ? '23' : value[0];\n          value[1] = Number(value[1]) > 59 ? '59' : value[1];\n          value[2] = Number(value[2]) > 59 ? '59' : value[2];\n          setBumperTime({\n            ...bumperTime,\n            hour: value[0],\n            minute: value[1],\n            second: value[2]\n          })\n          break;\n        default:\n          break\n      }\n\n      value = value.join(\":\")\n    }\n    setData({\n      ...data,\n      bumper: value\n    });\n  }\n\n  const handleClose = () => {\n    setModal(false);\n    setData(vastUrl)\n  }\n\n  const checkBlank = (str) => {\n    return str == null || str.trim() === ''\n  }\n  const handleSave = () => {\n    let errorString = ''\n    if (checkBlank(data.url_1) && isPreRoll && checkBlank(data.bumper)){\n      errorString = \"Vui lòng nhập Vast URL 01 và thông tin bumper\"\n      sendToast({message: errorString})\n    }\n    if (checkBlank(data.url_1) && !isPreRoll) {\n      errorString = \"Vui lòng nhập Vast URL 01\"\n      sendToast({message: errorString})\n    }\n    if (checkBlank(data.url_1) && isPreRoll && !checkBlank(data.bumper)) {\n      errorString = \"Vui lòng nhập Vast URL 01\"\n      sendToast({message: errorString})\n    }\n    if (isPreRoll && checkBlank(data.bumper) && !checkBlank(data.url_1)) {\n      errorString = \"Vui lòng nhập thông tin bumper\"\n      sendToast({message: errorString})\n    }\n    if (isPreRoll && !checkBlank(data.bumper) && !checkBlank(data.url_1)){\n      setModal(false);\n      data.bumper = [bumperTime.hour, bumperTime.minute, bumperTime.second].join(\":\")\n      setVastUrl(data);\n    }\n    if (!isPreRoll && !checkBlank(data.url_1)){\n      setModal(false)\n      setVastUrl(data)\n    }\n  }\n\n\n  return (\n    <React.Fragment>\n      <CModal closeOnBackdrop={false} show={modal} onClose={handleClose} centered={true}>\n        <CModalHeader style={{ backgroundColor: '#646464' }}>\n          <div className=\"w-100 d-flex justify-content-between align-items-center\" style={{ color: \"#FFF\" }}>\n            <h4 className=\"mb-0\">Vast URL & bumper</h4>\n            <CButton className='p-0 shadow-none' onClick={handleClose}>\n              <CIcon name=\"cil-x\" style={{ color: \"#FFF\" }}></CIcon>\n            </CButton>\n          </div>\n        </CModalHeader>\n        <CModalBody>\n          <div >\n            <div className=\"d-flex flex-column mb-2\">\n              <p className=\"mb-1\"><strong>VastURL</strong></p>\n              {\n                dataVastURl.map((item, index) => {\n                  let vastUrlItem = ''\n                  const id = item?.id\n                  if (id === 1 ) vastUrlItem = data?.url_1\n                  if (id === 2 ) vastUrlItem = data?.url_2\n                  if (id === 3 ) vastUrlItem = data?.url_3\n                  return  (\n                    <CInputGroup key={index} className={\"mt-2\"}>\n                      <CInput\n                        name={'url_' + item?.id}\n                        type=\"text\"\n                        value={vastUrlItem || ''}\n                        placeholder={'URL 0' + item?.id}\n                        style={{ color: '#222' }}\n                        onChange={handleChangeField}\n                      />\n                    </CInputGroup>\n                  )\n                })\n              }\n            </div>\n            {isPreRoll &&\n            <div className=\"d-flex flex-column mb-2\">\n              <p className=\"mb-1\"><strong>Bumper</strong></p>\n              <CInputGroup className=\"mt-1\">\n                <CInput\n                  name=\"bumper\"\n                  type=\"text\" value={data?.bumper || ''}\n                  placeholder='Enter để nhập. Format: mm:ss, hoặc hh:mm:ss'\n                  style={{ color: '#222' }}\n                  onChange={handleChangeBumper}\n                />\n              </CInputGroup>\n            </div>}\n            <div className=\"d-flex justify-content-end mt-3\">\n              <CButton className=\"pl-4 pr-4\" color=\"success\" onClick={handleSave}>Lưu</CButton>\n            </div>\n          </div>\n        </CModalBody>\n      </CModal>\n\n    </React.Fragment>\n\n  )\n}\n\n\nconst dataVastURl = [\n  {\n    id: 1,\n  },\n  {\n    id: 2,\n  },\n  {\n    id: 3,\n  }\n]\nexport default PopupAddVast\n"]},"metadata":{},"sourceType":"module"}