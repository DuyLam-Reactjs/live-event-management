{"ast":null,"code":"import _toConsumableArray from\"/Users/admin/Desktop/SourceDevVieON/LiveEvent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/admin/Desktop/SourceDevVieON/LiveEvent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{CBadge,CButton,CFormGroup,CModal,CModalBody,CModalFooter,CModalHeader,CSwitch}from\"@coreui/react\";import CIcon from\"@coreui/icons-react\";import{useDispatch}from\"react-redux\";import{closePopup}from\"../../actions/popup\";import UserApi from\"../../apis/userApi\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var PopupEditUser=function PopupEditUser(props){var _value$find,_value$find$role,_value$find2,_value$find2$role,_value$find3,_value$find3$role;var _ref=props||{},userItem=_ref.userItem,editField=_ref.editField,setEditField=_ref.setEditField;var _ref2=userItem||{},email=_ref2.email,id=_ref2.id;var dispatch=useDispatch();var _useState=useState(editField),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var handleClose=function handleClose(){dispatch(closePopup());};var saveUser=function saveUser(item){var data=_toConsumableArray(value);var index=data.findIndex(function(obj){return obj.id===item.id;});UserApi.updateInfoUser(data[index].id,data[index].email,data[index].role).then(function(res){if(res===null||res===void 0?void 0:res.success){setEditField(data);dispatch(closePopup());}});};var handleChange=function handleChange(item,e){var data=_toConsumableArray(editField);var index=data.findIndex(function(obj){return obj.id===item.id;});data[index].role[e.target.name]=e.target.checked;setEditField(data);setValue(data);};return/*#__PURE__*/_jsxs(CModal,{closeOnBackdrop:false,show:true,onClose:handleClose,centered:true,size:'',children:[/*#__PURE__*/_jsx(CModalHeader,{style:{backgroundColor:'#646464'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-100 d-flex justify-content-between align-items-center\",style:{color:\"#FFF\"},children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"mb-0\",children:[\"User Name: \",email,\" \"]}),/*#__PURE__*/_jsx(CButton,{className:\"p-0 shadow-none\",onClick:handleClose,children:/*#__PURE__*/_jsx(CIcon,{name:\"cil-x\",style:{color:\"#FFF\"}})})]})}),/*#__PURE__*/_jsxs(CModalBody,{children:[/*#__PURE__*/_jsxs(CFormGroup,{variant:\"custom-checkbox\",inline:true,children:[/*#__PURE__*/_jsx(CBadge,{children:/*#__PURE__*/_jsx(CSwitch,{className:'mx-1',color:'success',labelOn:'ON',labelOff:'OFF',defaultChecked:value===null||value===void 0?void 0:(_value$find=value.find(function(i){return i.id===(userItem===null||userItem===void 0?void 0:userItem.id);}))===null||_value$find===void 0?void 0:(_value$find$role=_value$find.role)===null||_value$find$role===void 0?void 0:_value$find$role.read,onChange:function onChange(e){return handleChange(userItem,e);},id:id+\"_1\",name:\"read\"})}),/*#__PURE__*/_jsx(\"span\",{className:\" mt-2\",style:{verticalAlign:'super'},children:\"Read\"})]}),/*#__PURE__*/_jsxs(CFormGroup,{variant:\"custom-checkbox\",inline:true,children:[/*#__PURE__*/_jsx(CBadge,{children:/*#__PURE__*/_jsx(CSwitch,{className:'mx-1',color:'success',labelOn:'ON',labelOff:'OFF',defaultChecked:value===null||value===void 0?void 0:(_value$find2=value.find(function(i){return i.id===(userItem===null||userItem===void 0?void 0:userItem.id);}))===null||_value$find2===void 0?void 0:(_value$find2$role=_value$find2.role)===null||_value$find2$role===void 0?void 0:_value$find2$role.write,onChange:function onChange(e){return handleChange(userItem,e);},id:id+\"_2\",name:\"write\"})}),/*#__PURE__*/_jsx(\"span\",{className:\" mt-2\",style:{verticalAlign:'super'},children:\"Write\"})]}),/*#__PURE__*/_jsxs(CFormGroup,{variant:\"custom-checkbox\",inline:true,children:[/*#__PURE__*/_jsx(CBadge,{children:/*#__PURE__*/_jsx(CSwitch,{className:'mx-1',color:'success',labelOn:'ON',labelOff:'OFF',defaultChecked:value===null||value===void 0?void 0:(_value$find3=value.find(function(i){return i.id===(userItem===null||userItem===void 0?void 0:userItem.id);}))===null||_value$find3===void 0?void 0:(_value$find3$role=_value$find3.role)===null||_value$find3$role===void 0?void 0:_value$find3$role.is_admin,onChange:function onChange(e){return handleChange(userItem,e);},id:id+\"_3\",name:\"is_admin\"})}),/*#__PURE__*/_jsx(\"span\",{className:\" mt-2\",style:{verticalAlign:'super'},children:\"Admin\"})]})]}),/*#__PURE__*/_jsx(CModalFooter,{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-end\",children:/*#__PURE__*/_jsx(CButton,{className:\"pl-4 pr-4\",color:\"success\",onClick:function onClick(){return saveUser(userItem);},children:\"L\\u01B0u\"})})})]});};export default PopupEditUser;","map":{"version":3,"sources":["/Users/admin/Desktop/SourceDevVieON/LiveEvent/src/views/users/PopupEditUser.js"],"names":["React","useState","CBadge","CButton","CFormGroup","CModal","CModalBody","CModalFooter","CModalHeader","CSwitch","CIcon","useDispatch","closePopup","UserApi","PopupEditUser","props","userItem","editField","setEditField","email","id","dispatch","value","setValue","handleClose","saveUser","item","data","index","findIndex","obj","updateInfoUser","role","then","res","success","handleChange","e","target","name","checked","backgroundColor","color","find","i","read","verticalAlign","write","is_admin"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\nimport {\n    CBadge,\n    CButton,\n    CFormGroup,\n    CModal,\n    CModalBody,\n    CModalFooter,\n    CModalHeader, CSwitch,\n\n} from \"@coreui/react\";\nimport CIcon from \"@coreui/icons-react\";\nimport {useDispatch} from \"react-redux\";\nimport {closePopup} from \"../../actions/popup\";\nimport UserApi from \"../../apis/userApi\";\n\nconst PopupEditUser = (props) => {\n  const { userItem, editField, setEditField} = props || {}\n  const {email, id} = userItem || {}\n  const dispatch = useDispatch()\n  const [value, setValue] = useState(editField)\n\n  const handleClose = () => {\n      dispatch(closePopup())\n  }\n  const saveUser = (item) => {\n    let data = [...value];\n    const index = data.findIndex(obj => obj.id === item.id);\n    UserApi.updateInfoUser(data[index].id, data[index].email, data[index].role).then(res => {\n        if (res?.success){\n            setEditField(data)\n            dispatch(closePopup())\n        }\n    })\n    }\n\n    const handleChange = (item, e) => {\n        let data = [...editField];\n        const index = data.findIndex(obj => obj.id === item.id);\n        data[index].role[e.target.name] = e.target.checked\n        setEditField(data);\n        setValue(data)\n    }\n  return (\n    <CModal closeOnBackdrop={false} show={true} onClose={handleClose} centered={true} size={''}>\n      <CModalHeader style={{ backgroundColor: '#646464' }}>\n        <div className=\"w-100 d-flex justify-content-between align-items-center\" style={{ color: \"#FFF\" }}>\n          <h4 className=\"mb-0\">User Name: {email} </h4>\n          <CButton className='p-0 shadow-none' onClick={handleClose}>\n            <CIcon name=\"cil-x\" style={{ color: \"#FFF\" }}></CIcon>\n          </CButton>\n        </div>\n      </CModalHeader>\n      <CModalBody>\n          <CFormGroup variant=\"custom-checkbox\" inline>\n              <CBadge >\n                  <CSwitch\n                      className={'mx-1'}\n                      color={'success'}\n                      labelOn={'ON'} labelOff={'OFF'}\n                      defaultChecked={value?.find(i => i.id === userItem?.id)?.role?.read}\n                      onChange={(e) => handleChange(userItem, e)}\n                      id={id + \"_1\"}\n                      name='read'\n                  />\n              </CBadge>\n              <span className=' mt-2' style={{verticalAlign: 'super'}}>Read</span>\n          </CFormGroup>\n          <CFormGroup variant=\"custom-checkbox\" inline>\n              <CBadge >\n                  <CSwitch\n                      className={'mx-1'}\n                      color={'success'}\n                      labelOn={'ON'} labelOff={'OFF'}\n                      defaultChecked={value?.find(i => i.id === userItem?.id)?.role?.write}\n                      onChange={(e) => handleChange(userItem, e)}\n                      id={id + \"_2\"}\n                      name='write'\n                  />\n              </CBadge>\n              <span className=' mt-2' style={{verticalAlign: 'super'}}>Write</span>\n          </CFormGroup>\n          <CFormGroup variant=\"custom-checkbox\" inline>\n              <CBadge >\n                  <CSwitch\n                      className={'mx-1'}\n                      color={'success'}\n                      labelOn={'ON'} labelOff={'OFF'}\n                      defaultChecked={value?.find(i => i.id === userItem?.id)?.role?.is_admin}\n                      onChange={(e) => handleChange(userItem, e)}\n                      id={id + \"_3\"}\n                      name='is_admin'\n                  />\n              </CBadge>\n              <span className=' mt-2' style={{verticalAlign: 'super'}}>Admin</span>\n          </CFormGroup>\n\n      </CModalBody>\n      <CModalFooter>\n        <div className=\"d-flex justify-content-end\">\n          <CButton className=\"pl-4 pr-4\" color=\"success\" onClick={()=>saveUser(userItem)}>Lưu</CButton>\n        </div>\n      </CModalFooter>\n    </CModal>\n  )\n}\nexport default PopupEditUser\n"]},"metadata":{},"sourceType":"module"}