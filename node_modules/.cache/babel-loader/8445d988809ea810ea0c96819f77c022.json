{"ast":null,"code":"import _toConsumableArray from\"/Users/admin/Desktop/SourceDevVieON/LiveEvent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/admin/Desktop/SourceDevVieON/LiveEvent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/admin/Desktop/SourceDevVieON/LiveEvent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{CButton,CModal,CModalBody,CModalFooter,CModalHeader,CRow}from\"@coreui/react\";import CIcon from\"@coreui/icons-react\";import SkipAfterInStreamAds from\"../CreateContentProvider/CreateStreamAds/SkipAfterInStreamAds\";import SkipInStreamAds from\"../CreateContentProvider/CreateStreamAds/SkipInStreamAds\";import StatusInStreamAds from\"../CreateContentProvider/CreateStreamAds/StatusInStreamAds\";import VastUrlInStreamAds from\"../CreateContentProvider/CreateStreamAds/VastUrlInStreamAds\";import TypeInStreamAds from\"../CreateContentProvider/CreateStreamAds/TypeInStreamAds\";import ContentInStreamAds from\"../CreateContentProvider/CreateStreamAds/ContentInStreamAds\";import PlatformInStreamAds from\"../CreateContentProvider/CreateStreamAds/PlatFormInStreamAds\";import GroupInStreamAds from\"../CreateContentProvider/CreateStreamAds/GroupInStreamAds\";import inStreamAdsApi from\"../../../apis/inStreamAdsApi\";import{sendToast}from\"../../../helpers/common\";import{useLocation}from\"react-router\";import{useDispatch}from\"react-redux\";import{closePopup}from\"../../../actions/popup\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var queryString=require('query-string');var PopupCreateNewAds=function PopupCreateNewAds(props){var setNewData=props.setNewData,newData=props.newData;var dispatch=useDispatch();var location=useLocation();var parsedID=queryString.parse(location.search);var _useState=useState({group:'default',type:'Pre-roll',vast_url:{url_1:'',url_2:'',url_3:'',bumper:''},status:1,can_skip:true,skip_after:5,platform:'',is_all_platform:true,content:{id:'',title:''}}),_useState2=_slicedToArray(_useState,2),dataInStreamAds=_useState2[0],setDataAds=_useState2[1];var onChangeNameGroup=function onChangeNameGroup(value){setDataAds(_objectSpread(_objectSpread({},dataInStreamAds),{},{group:value}));};var onChangeTimeSkip=function onChangeTimeSkip(value){setDataAds(_objectSpread(_objectSpread({},dataInStreamAds),{},{skip_after:value}));};var onChangeType=function onChangeType(item){setDataAds(_objectSpread(_objectSpread({},dataInStreamAds),{},{type:item}));};var onChangeStatus=function onChangeStatus(item){setDataAds(_objectSpread(_objectSpread({},dataInStreamAds),{},{status:item===null||item===void 0?void 0:item.status}));};var onChangeSkip=function onChangeSkip(item){setDataAds(_objectSpread(_objectSpread({},dataInStreamAds),{},{can_skip:item===null||item===void 0?void 0:item.can_skip}));};var onChangePlatform=function onChangePlatform(item){setDataAds(_objectSpread(_objectSpread({},dataInStreamAds),{},{platform:item===null||item===void 0?void 0:item.name,is_all_platform:item===null||item===void 0?void 0:item.is_all_platform}));};var setContent=function setContent(content){var title=content===null||content===void 0?void 0:content.name;var id=content===null||content===void 0?void 0:content.id;var newContent=new Object({id:id,title:title});setDataAds(_objectSpread(_objectSpread({},dataInStreamAds),{},{content:newContent}));};var setVastUrl=function setVastUrl(vastUrl){setDataAds(_objectSpread(_objectSpread({},dataInStreamAds),{},{vast_url:vastUrl}));};var handleClose=function handleClose(){dispatch(closePopup());};var onCreateAds=function onCreateAds(){var _dataInStreamAds$cont;if(dataInStreamAds===null||dataInStreamAds===void 0?void 0:(_dataInStreamAds$cont=dataInStreamAds.content)===null||_dataInStreamAds$cont===void 0?void 0:_dataInStreamAds$cont.id){if(dataInStreamAds===null||dataInStreamAds===void 0?void 0:dataInStreamAds.group){inStreamAdsApi.setInStreamAds(dataInStreamAds,parsedID.id,false).then(function(res){var data=res===null||res===void 0?void 0:res.data;if(res===null||res===void 0?void 0:res.success){var newDataGroup=[].concat(_toConsumableArray(newData),[data]);var sortNewDataGroup=newDataGroup.reverse();setNewData(sortNewDataGroup);dispatch(closePopup());}else{sendToast({message:data===null||data===void 0?void 0:data.message});}});}else{sendToast({message:'Tên nhóm là trường bắt buộc. '});}}else{if(dataInStreamAds===null||dataInStreamAds===void 0?void 0:dataInStreamAds.group){inStreamAdsApi.setInStreamAds(dataInStreamAds,parsedID.id,true).then(function(res){var data=res===null||res===void 0?void 0:res.data;if(res===null||res===void 0?void 0:res.success){var newDataGroup=[].concat(_toConsumableArray(newData),[data]);var sortNewDataGroup=newDataGroup.reverse();setNewData(sortNewDataGroup);dispatch(closePopup());}else{sendToast({message:data===null||data===void 0?void 0:data.message});}});}else{sendToast({message:'Tên nhóm là trường bắt buộc. '});}}};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(CModal,{closeOnBackdrop:false,show:true,centered:true,size:'xl',children:[/*#__PURE__*/_jsx(CModalHeader,{style:{backgroundColor:'#646464'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-100 d-flex justify-content-between align-items-center\",style:{color:\"#FFF\"},children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mb-0\",children:\"Th\\xF4ng tin qu\\u1EA3ng c\\xE1o \"}),/*#__PURE__*/_jsx(CButton,{className:\"p-0 shadow-none\",onClick:handleClose,children:/*#__PURE__*/_jsx(CIcon,{name:\"cil-x\",style:{color:\"#FFF\"}})})]})}),/*#__PURE__*/_jsx(CModalBody,{children:/*#__PURE__*/_jsxs(CRow,{className:'justify-content-between',children:[/*#__PURE__*/_jsx(GroupInStreamAds,{itemAds:dataInStreamAds,onChangeNameGroup:onChangeNameGroup}),/*#__PURE__*/_jsx(TypeInStreamAds,{itemAds:dataInStreamAds,dataInStreamAdsType:dataInStreamAdsType,onChangeType:onChangeType}),/*#__PURE__*/_jsx(VastUrlInStreamAds,{itemAds:dataInStreamAds,setVastUrl:setVastUrl,dataInStreamAdsType:dataInStreamAdsType}),/*#__PURE__*/_jsx(StatusInStreamAds,{itemAds:dataInStreamAds,dataInStreamAdsStatus:dataInStreamAdsStatus,onChangeStatus:onChangeStatus}),/*#__PURE__*/_jsx(SkipInStreamAds,{itemAds:dataInStreamAds,dataInStreamAdsSkip:dataInStreamAdsSkip,onChangeSkip:onChangeSkip}),/*#__PURE__*/_jsx(SkipAfterInStreamAds,{itemAds:dataInStreamAds,onChangeTimeSkip:onChangeTimeSkip}),/*#__PURE__*/_jsx(PlatformInStreamAds,{itemAds:dataInStreamAds,onChangePlatform:onChangePlatform,dataInStreamAdsPlatForm:dataInStreamAdsPlatForm}),/*#__PURE__*/_jsx(ContentInStreamAds,{itemAds:dataInStreamAds,dataInStreamAdsContent:dataInStreamAdsContent,setContent:setContent,dataInStreamAdsType:dataInStreamAdsType})]})}),/*#__PURE__*/_jsx(CModalFooter,{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-end mt-3\",children:/*#__PURE__*/_jsx(CButton,{className:\"pl-4 pr-4\",color:\"success\",onClick:onCreateAds,children:'Tạo'})})})]})});};var dataInStreamAdsType=[{id:'Pre-roll',name:'Pre-roll'},{id:'Mid-roll',name:'Mid-roll'}];var dataInStreamAdsStatus=[{id:'show',name:'Hiện',status:1},{id:'hide',name:'Ẩn',status:0}];var dataInStreamAdsSkip=[{id:'yes',name:'Có',can_skip:true},{id:'no',name:'Không',can_skip:false}];var dataInStreamAdsPlatForm=[{id:'all',name:'Tất cả',is_all_platform:true},{id:'web',name:'Web',is_all_platform:false},{id:'iOS',name:'iOS',is_all_platform:false},{id:'Android',name:'Android',is_all_platform:false},{id:'AndroidTV',name:'AndroidTV',is_all_platform:false},{id:'Samsung-TV',name:'Samsung-TV',is_all_platform:false},{id:'LG-TV',name:'LG-TV',is_all_platform:false}];var dataInStreamAdsContent=[{id:'all',name:'Tất cả',is_all_content:true},{id:'filter',name:'Chọn nội dung ...',is_all_content:false}];export default PopupCreateNewAds;","map":{"version":3,"sources":["/Users/admin/Desktop/SourceDevVieON/LiveEvent/src/views/instream-ads/Popup/PopupCreateNewAds.js"],"names":["React","useState","CButton","CModal","CModalBody","CModalFooter","CModalHeader","CRow","CIcon","SkipAfterInStreamAds","SkipInStreamAds","StatusInStreamAds","VastUrlInStreamAds","TypeInStreamAds","ContentInStreamAds","PlatformInStreamAds","GroupInStreamAds","inStreamAdsApi","sendToast","useLocation","useDispatch","closePopup","queryString","require","PopupCreateNewAds","props","setNewData","newData","dispatch","location","parsedID","parse","search","group","type","vast_url","url_1","url_2","url_3","bumper","status","can_skip","skip_after","platform","is_all_platform","content","id","title","dataInStreamAds","setDataAds","onChangeNameGroup","value","onChangeTimeSkip","onChangeType","item","onChangeStatus","onChangeSkip","onChangePlatform","name","setContent","newContent","Object","setVastUrl","vastUrl","handleClose","onCreateAds","setInStreamAds","then","res","data","success","newDataGroup","sortNewDataGroup","reverse","message","backgroundColor","color","dataInStreamAdsType","dataInStreamAdsStatus","dataInStreamAdsSkip","dataInStreamAdsPlatForm","dataInStreamAdsContent","is_all_content"],"mappings":"mfAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAA+B,OAA/B,CACA,OAAQC,OAAR,CAAiBC,MAAjB,CAAyBC,UAAzB,CAAqCC,YAArC,CAAmDC,YAAnD,CAAiEC,IAAjE,KAA4E,eAA5E,CACA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,CACA,MAAOC,CAAAA,oBAAP,KAAiC,+DAAjC,CACA,MAAOC,CAAAA,eAAP,KAA4B,0DAA5B,CACA,MAAOC,CAAAA,iBAAP,KAA8B,4DAA9B,CACA,MAAOC,CAAAA,kBAAP,KAA+B,6DAA/B,CACA,MAAOC,CAAAA,eAAP,KAA4B,0DAA5B,CACA,MAAOC,CAAAA,kBAAP,KAA+B,6DAA/B,CACA,MAAOC,CAAAA,mBAAP,KAAgC,8DAAhC,CACA,MAAOC,CAAAA,gBAAP,KAA6B,2DAA7B,CACA,MAAOC,CAAAA,cAAP,KAA2B,8BAA3B,CACA,OAAQC,SAAR,KAAwB,yBAAxB,CACA,OAAQC,WAAR,KAA0B,cAA1B,CACA,OAAQC,WAAR,KAA0B,aAA1B,CACA,OAAQC,UAAR,KAAyB,wBAAzB,C,6IAEA,GAAMC,CAAAA,WAAW,CAAGC,OAAO,CAAC,cAAD,CAA3B,CAEA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACC,KAAD,CAAW,CACjC,GACIC,CAAAA,UADJ,CAGID,KAHJ,CACIC,UADJ,CAEIC,OAFJ,CAGIF,KAHJ,CAEIE,OAFJ,CAKA,GAAMC,CAAAA,QAAQ,CAAGR,WAAW,EAA5B,CACA,GAAMS,CAAAA,QAAQ,CAAGV,WAAW,EAA5B,CACA,GAAMW,CAAAA,QAAQ,CAAGR,WAAW,CAACS,KAAZ,CAAkBF,QAAQ,CAACG,MAA3B,CAAjB,CAGA,cAAsC/B,QAAQ,CAAC,CAC3CgC,KAAK,CAAE,SADoC,CAE3CC,IAAI,CAAE,UAFqC,CAG3CC,QAAQ,CAAE,CAACC,KAAK,CAAE,EAAR,CAAYC,KAAK,CAAE,EAAnB,CAAuBC,KAAK,CAAE,EAA9B,CAAkCC,MAAM,CAAE,EAA1C,CAHiC,CAI3CC,MAAM,CAAE,CAJmC,CAK3CC,QAAQ,CAAE,IALiC,CAM3CC,UAAU,CAAE,CAN+B,CAO3CC,QAAQ,CAAE,EAPiC,CAQ3CC,eAAe,CAAE,IAR0B,CAS3CC,OAAO,CAAE,CACLC,EAAE,CAAC,EADE,CAELC,KAAK,CAAC,EAFD,CATkC,CAAD,CAA9C,wCAAOC,eAAP,eAAwBC,UAAxB,eAgBA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACC,KAAD,CAAW,CACjCF,UAAU,gCAAKD,eAAL,MAAsBf,KAAK,CAAEkB,KAA7B,GAAV,CACH,CAFD,CAGA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACD,KAAD,CAAW,CAChCF,UAAU,gCAAKD,eAAL,MAAsBN,UAAU,CAAES,KAAlC,GAAV,CACH,CAFD,CAGA,GAAME,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,IAAD,CAAS,CAC1BL,UAAU,gCAAKD,eAAL,MAAsBd,IAAI,CAAEoB,IAA5B,GAAV,CACH,CAFD,CAGA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACD,IAAD,CAAU,CAC7BL,UAAU,gCAAKD,eAAL,MAAsBR,MAAM,CAAEc,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEd,MAApC,GAAV,CACH,CAFD,CAGA,GAAMgB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACF,IAAD,CAAU,CAC3BL,UAAU,gCAAKD,eAAL,MAAsBP,QAAQ,CAAEa,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEb,QAAtC,GAAV,CACH,CAFD,CAGA,GAAMgB,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACH,IAAD,CAAU,CAC/BL,UAAU,gCAAKD,eAAL,MAAsBL,QAAQ,CAAEW,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEI,IAAtC,CAA4Cd,eAAe,CAAEU,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEV,eAAnE,GAAV,CACH,CAFD,CAKA,GAAMe,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACd,OAAD,CAAa,CAC5B,GAAME,CAAAA,KAAK,CAAGF,OAAH,SAAGA,OAAH,iBAAGA,OAAO,CAAEa,IAAvB,CACA,GAAMZ,CAAAA,EAAE,CAAGD,OAAH,SAAGA,OAAH,iBAAGA,OAAO,CAAEC,EAApB,CACA,GAAMc,CAAAA,UAAU,CAAG,GAAIC,CAAAA,MAAJ,CAAW,CAACf,EAAE,CAAFA,EAAD,CAAKC,KAAK,CAALA,KAAL,CAAX,CAAnB,CACAE,UAAU,gCAAKD,eAAL,MAAsBH,OAAO,CAAEe,UAA/B,GAAV,CACH,CALD,CAMA,GAAME,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,OAAD,CAAa,CAC5Bd,UAAU,gCACHD,eADG,MAENb,QAAQ,CAAE4B,OAFJ,GAAV,CAIH,CALD,CAMA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtBpC,QAAQ,CAACP,UAAU,EAAX,CAAR,CACH,CAFD,CAIA,GAAM4C,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,2BACtB,GAAIjB,eAAJ,SAAIA,eAAJ,wCAAIA,eAAe,CAAEH,OAArB,gDAAI,sBAA0BC,EAA9B,CAAkC,CAC9B,GAAIE,eAAJ,SAAIA,eAAJ,iBAAIA,eAAe,CAAEf,KAArB,CAA2B,CACvBhB,cAAc,CAACiD,cAAf,CAA8BlB,eAA9B,CAA+ClB,QAAQ,CAACgB,EAAxD,CAA4D,KAA5D,EAAmEqB,IAAnE,CAAwE,SAAAC,GAAG,CAAE,CACzE,GAAMC,CAAAA,IAAI,CAAGD,GAAH,SAAGA,GAAH,iBAAGA,GAAG,CAAEC,IAAlB,CACA,GAAID,GAAJ,SAAIA,GAAJ,iBAAIA,GAAG,CAAEE,OAAT,CAAiB,CACb,GAAMC,CAAAA,YAAY,8BAAO5C,OAAP,GAAgB0C,IAAhB,EAAlB,CACA,GAAMG,CAAAA,gBAAgB,CAAGD,YAAY,CAACE,OAAb,EAAzB,CACA/C,UAAU,CAAC8C,gBAAD,CAAV,CACA5C,QAAQ,CAACP,UAAU,EAAX,CAAR,CACH,CALD,IAMK,CACDH,SAAS,CAAC,CAACwD,OAAO,CAAEL,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEK,OAAhB,CAAD,CAAT,CACH,CACJ,CAXD,EAYH,CAbD,IAcK,CACDxD,SAAS,CAAC,CAACwD,OAAO,CAAE,+BAAV,CAAD,CAAT,CACH,CACJ,CAlBD,IAkBM,CACF,GAAI1B,eAAJ,SAAIA,eAAJ,iBAAIA,eAAe,CAAEf,KAArB,CAA2B,CACvBhB,cAAc,CAACiD,cAAf,CAA8BlB,eAA9B,CAA+ClB,QAAQ,CAACgB,EAAxD,CAA4D,IAA5D,EAAkEqB,IAAlE,CAAuE,SAAAC,GAAG,CAAE,CACxE,GAAMC,CAAAA,IAAI,CAAGD,GAAH,SAAGA,GAAH,iBAAGA,GAAG,CAAEC,IAAlB,CACA,GAAID,GAAJ,SAAIA,GAAJ,iBAAIA,GAAG,CAAEE,OAAT,CAAiB,CACb,GAAMC,CAAAA,YAAY,8BAAO5C,OAAP,GAAgB0C,IAAhB,EAAlB,CACA,GAAMG,CAAAA,gBAAgB,CAAGD,YAAY,CAACE,OAAb,EAAzB,CACA/C,UAAU,CAAC8C,gBAAD,CAAV,CACA5C,QAAQ,CAACP,UAAU,EAAX,CAAR,CACH,CALD,IAMK,CACDH,SAAS,CAAC,CAACwD,OAAO,CAAEL,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEK,OAAhB,CAAD,CAAT,CACH,CACJ,CAXD,EAYH,CAbD,IAaM,CACFxD,SAAS,CAAC,CAACwD,OAAO,CAAE,+BAAV,CAAD,CAAT,CACH,CAEJ,CACJ,CAtCD,CAyCA,mBACI,sCACI,MAAC,MAAD,EACI,eAAe,CAAE,KADrB,CAEI,IAAI,CAAE,IAFV,CAEiB,QAAQ,CAAE,IAF3B,CAEiC,IAAI,CAAE,IAFvC,wBAGI,KAAC,YAAD,EAAc,KAAK,CAAE,CAAEC,eAAe,CAAE,SAAnB,CAArB,uBACI,aAAK,SAAS,CAAC,yDAAf,CAAyE,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAT,CAAhF,wBACI,WAAI,SAAS,CAAC,MAAd,6CADJ,cAEI,KAAC,OAAD,EAAS,SAAS,CAAC,iBAAnB,CAAqC,OAAO,CAAEZ,WAA9C,uBACI,KAAC,KAAD,EAAO,IAAI,CAAC,OAAZ,CAAoB,KAAK,CAAE,CAAEY,KAAK,CAAE,MAAT,CAA3B,EADJ,EAFJ,GADJ,EAHJ,cAWI,KAAC,UAAD,wBACI,MAAC,IAAD,EAAM,SAAS,CAAE,yBAAjB,wBACI,KAAC,gBAAD,EACI,OAAO,CAAE5B,eADb,CAEI,iBAAiB,CAAEE,iBAFvB,EADJ,cAKI,KAAC,eAAD,EACI,OAAO,CAAEF,eADb,CAEI,mBAAmB,CAAE6B,mBAFzB,CAGI,YAAY,CAAExB,YAHlB,EALJ,cAUI,KAAC,kBAAD,EACI,OAAO,CAAEL,eADb,CAEI,UAAU,CAAEc,UAFhB,CAGI,mBAAmB,CAAEe,mBAHzB,EAVJ,cAeI,KAAC,iBAAD,EACI,OAAO,CAAE7B,eADb,CAEI,qBAAqB,CAAE8B,qBAF3B,CAGI,cAAc,CAAEvB,cAHpB,EAfJ,cAoBI,KAAC,eAAD,EACI,OAAO,CAAEP,eADb,CAEI,mBAAmB,CAAE+B,mBAFzB,CAGI,YAAY,CAAEvB,YAHlB,EApBJ,cAyBI,KAAC,oBAAD,EACI,OAAO,CAAER,eADb,CAEI,gBAAgB,CAAEI,gBAFtB,EAzBJ,cA6BI,KAAC,mBAAD,EACI,OAAO,CAAEJ,eADb,CAEI,gBAAgB,CAAES,gBAFtB,CAGI,uBAAuB,CAAEuB,uBAH7B,EA7BJ,cAkCI,KAAC,kBAAD,EACI,OAAO,CAAEhC,eADb,CAEI,sBAAsB,CAAEiC,sBAF5B,CAGI,UAAU,CAAEtB,UAHhB,CAII,mBAAmB,CAAEkB,mBAJzB,EAlCJ,GADJ,EAXJ,cAsDI,KAAC,YAAD,wBACI,YAAK,SAAS,CAAC,iCAAf,uBACI,KAAC,OAAD,EAAS,SAAS,CAAC,WAAnB,CAA+B,KAAK,CAAC,SAArC,CAA+C,OAAO,CAAEZ,WAAxD,UAAuE,KAAvE,EADJ,EADJ,EAtDJ,GADJ,EADJ,CAgEH,CAxKD,CAyKA,GAAMY,CAAAA,mBAAmB,CAAG,CACxB,CAAC/B,EAAE,CAAC,UAAJ,CAAeY,IAAI,CAAE,UAArB,CADwB,CAExB,CAACZ,EAAE,CAAC,UAAJ,CAAgBY,IAAI,CAAE,UAAtB,CAFwB,CAA5B,CAIA,GAAMoB,CAAAA,qBAAqB,CAAG,CAC1B,CAAChC,EAAE,CAAE,MAAL,CAAaY,IAAI,CAAE,MAAnB,CAA2BlB,MAAM,CAAE,CAAnC,CAD0B,CAE1B,CAACM,EAAE,CAAE,MAAL,CAAaY,IAAI,CAAE,IAAnB,CAAyBlB,MAAM,CAAE,CAAjC,CAF0B,CAA9B,CAIA,GAAMuC,CAAAA,mBAAmB,CAAG,CACxB,CAACjC,EAAE,CAAE,KAAL,CAAYY,IAAI,CAAE,IAAlB,CAAwBjB,QAAQ,CAAE,IAAlC,CADwB,CAExB,CAACK,EAAE,CAAE,IAAL,CAAWY,IAAI,CAAE,OAAjB,CAA0BjB,QAAQ,CAAE,KAApC,CAFwB,CAA5B,CAIA,GAAMuC,CAAAA,uBAAuB,CAAG,CAC5B,CAAClC,EAAE,CAAE,KAAL,CAAYY,IAAI,CAAE,QAAlB,CAA4Bd,eAAe,CAAE,IAA7C,CAD4B,CAE5B,CAACE,EAAE,CAAE,KAAL,CAAYY,IAAI,CAAC,KAAjB,CAAwBd,eAAe,CAAE,KAAzC,CAF4B,CAG5B,CAACE,EAAE,CAAE,KAAL,CAAYY,IAAI,CAAC,KAAjB,CAAwBd,eAAe,CAAE,KAAzC,CAH4B,CAI5B,CAACE,EAAE,CAAE,SAAL,CAAgBY,IAAI,CAAC,SAArB,CAAgCd,eAAe,CAAE,KAAjD,CAJ4B,CAK5B,CAACE,EAAE,CAAE,WAAL,CAAkBY,IAAI,CAAC,WAAvB,CAAoCd,eAAe,CAAE,KAArD,CAL4B,CAM5B,CAACE,EAAE,CAAE,YAAL,CAAmBY,IAAI,CAAC,YAAxB,CAAsCd,eAAe,CAAE,KAAvD,CAN4B,CAO5B,CAACE,EAAE,CAAE,OAAL,CAAcY,IAAI,CAAC,OAAnB,CAA4Bd,eAAe,CAAE,KAA7C,CAP4B,CAAhC,CASA,GAAMqC,CAAAA,sBAAsB,CAAG,CAC3B,CAACnC,EAAE,CAAE,KAAL,CAAYY,IAAI,CAAE,QAAlB,CAA4BwB,cAAc,CAAE,IAA5C,CAD2B,CAE3B,CAACpC,EAAE,CAAE,QAAL,CAAeY,IAAI,CAAE,mBAArB,CAA0CwB,cAAc,CAAE,KAA1D,CAF2B,CAA/B,CAIA,cAAe1D,CAAAA,iBAAf","sourcesContent":["import React, { useState} from 'react'\nimport {CButton, CModal, CModalBody, CModalFooter, CModalHeader, CRow} from \"@coreui/react\";\nimport CIcon from \"@coreui/icons-react\";\nimport SkipAfterInStreamAds from \"../CreateContentProvider/CreateStreamAds/SkipAfterInStreamAds\";\nimport SkipInStreamAds from \"../CreateContentProvider/CreateStreamAds/SkipInStreamAds\";\nimport StatusInStreamAds from \"../CreateContentProvider/CreateStreamAds/StatusInStreamAds\";\nimport VastUrlInStreamAds from \"../CreateContentProvider/CreateStreamAds/VastUrlInStreamAds\";\nimport TypeInStreamAds from \"../CreateContentProvider/CreateStreamAds/TypeInStreamAds\";\nimport ContentInStreamAds from \"../CreateContentProvider/CreateStreamAds/ContentInStreamAds\";\nimport PlatformInStreamAds from \"../CreateContentProvider/CreateStreamAds/PlatFormInStreamAds\";\nimport GroupInStreamAds from \"../CreateContentProvider/CreateStreamAds/GroupInStreamAds\";\nimport inStreamAdsApi from \"../../../apis/inStreamAdsApi\";\nimport {sendToast} from \"../../../helpers/common\";\nimport {useLocation} from \"react-router\";\nimport {useDispatch} from \"react-redux\";\nimport {closePopup} from \"../../../actions/popup\";\n\nconst queryString = require('query-string');\n\nconst PopupCreateNewAds = (props) => {\n    const {\n        setNewData,\n        newData,\n    } = props\n\n    const dispatch = useDispatch()\n    const location = useLocation()\n    const parsedID = queryString.parse(location.search)\n\n\n    const [dataInStreamAds, setDataAds] = useState({\n        group: 'default',\n        type: 'Pre-roll',\n        vast_url: {url_1: '', url_2: '', url_3: '', bumper: ''},\n        status: 1,\n        can_skip: true,\n        skip_after: 5,\n        platform: '',\n        is_all_platform: true,\n        content: {\n            id:'',\n            title:''\n        }\n    })\n\n\n    const onChangeNameGroup = (value) => {\n        setDataAds({...dataInStreamAds, group: value})\n    }\n    const onChangeTimeSkip = (value) => {\n        setDataAds({...dataInStreamAds, skip_after: value})\n    }\n    const onChangeType = (item) =>{\n        setDataAds({...dataInStreamAds, type: item })\n    }\n    const onChangeStatus = (item) => {\n        setDataAds({...dataInStreamAds, status: item?.status})\n    }\n    const onChangeSkip = (item) => {\n        setDataAds({...dataInStreamAds, can_skip: item?.can_skip})\n    }\n    const onChangePlatform = (item) => {\n        setDataAds({...dataInStreamAds, platform: item?.name, is_all_platform: item?.is_all_platform})\n    }\n\n\n    const setContent = (content) => {\n        const title = content?.name\n        const id = content?.id\n        const newContent = new Object({id, title})\n        setDataAds({...dataInStreamAds, content: newContent})\n    }\n    const setVastUrl = (vastUrl) => {\n        setDataAds({\n            ...dataInStreamAds,\n            vast_url: vastUrl\n        })\n    }\n    const handleClose = () => {\n        dispatch(closePopup())\n    }\n\n    const onCreateAds = () => {\n        if (dataInStreamAds?.content?.id) {\n            if (dataInStreamAds?.group){\n                inStreamAdsApi.setInStreamAds(dataInStreamAds, parsedID.id, false).then(res=>{\n                    const data = res?.data\n                    if (res?.success){\n                        const newDataGroup = [...newData, data]\n                        const sortNewDataGroup = newDataGroup.reverse()\n                        setNewData(sortNewDataGroup)\n                        dispatch(closePopup())\n                    }\n                    else {\n                        sendToast({message: data?.message})\n                    }\n                })\n            }\n            else {\n                sendToast({message: 'Tên nhóm là trường bắt buộc. '})\n            }\n        }else {\n            if (dataInStreamAds?.group){\n                inStreamAdsApi.setInStreamAds(dataInStreamAds, parsedID.id, true).then(res=>{\n                    const data = res?.data\n                    if (res?.success){\n                        const newDataGroup = [...newData, data]\n                        const sortNewDataGroup = newDataGroup.reverse()\n                        setNewData(sortNewDataGroup)\n                        dispatch(closePopup())\n                    }\n                    else {\n                        sendToast({message: data?.message})\n                    }\n                })\n            }else {\n                sendToast({message: 'Tên nhóm là trường bắt buộc. '})\n            }\n\n        }\n    }\n\n\n    return(\n        <>\n            <CModal\n                closeOnBackdrop={false}\n                show={true}  centered={true} size={'xl'}>\n                <CModalHeader style={{ backgroundColor: '#646464' }}>\n                    <div className=\"w-100 d-flex justify-content-between align-items-center\" style={{ color: \"#FFF\" }}>\n                        <h4 className=\"mb-0\">Thông tin quảng cáo </h4>\n                        <CButton className='p-0 shadow-none' onClick={handleClose}>\n                            <CIcon name=\"cil-x\" style={{ color: \"#FFF\" }}></CIcon>\n                        </CButton>\n                    </div>\n                </CModalHeader>\n                <CModalBody>\n                    <CRow className={'justify-content-between'} >\n                        <GroupInStreamAds\n                            itemAds={dataInStreamAds}\n                            onChangeNameGroup={onChangeNameGroup}\n                        />\n                        <TypeInStreamAds\n                            itemAds={dataInStreamAds}\n                            dataInStreamAdsType={dataInStreamAdsType}\n                            onChangeType={onChangeType}\n                        />\n                        <VastUrlInStreamAds\n                            itemAds={dataInStreamAds}\n                            setVastUrl={setVastUrl}\n                            dataInStreamAdsType={dataInStreamAdsType}\n                        />\n                        <StatusInStreamAds\n                            itemAds={dataInStreamAds}\n                            dataInStreamAdsStatus={dataInStreamAdsStatus}\n                            onChangeStatus={onChangeStatus}\n                        />\n                        <SkipInStreamAds\n                            itemAds={dataInStreamAds}\n                            dataInStreamAdsSkip={dataInStreamAdsSkip}\n                            onChangeSkip={onChangeSkip}\n                        />\n                        <SkipAfterInStreamAds\n                            itemAds={dataInStreamAds}\n                            onChangeTimeSkip={onChangeTimeSkip}\n                        />\n                        <PlatformInStreamAds\n                            itemAds={dataInStreamAds}\n                            onChangePlatform={onChangePlatform}\n                            dataInStreamAdsPlatForm={dataInStreamAdsPlatForm}\n                        />\n                        <ContentInStreamAds\n                            itemAds={dataInStreamAds}\n                            dataInStreamAdsContent={dataInStreamAdsContent}\n                            setContent={setContent}\n                            dataInStreamAdsType={dataInStreamAdsType}\n                        />\n                    </CRow>\n                </CModalBody>\n                <CModalFooter>\n                    <div className=\"d-flex justify-content-end mt-3\">\n                        <CButton className=\"pl-4 pr-4\" color=\"success\" onClick={onCreateAds}>{ 'Tạo'}</CButton>\n                    </div>\n                </CModalFooter>\n            </CModal>\n        </>\n    )\n}\nconst dataInStreamAdsType = [\n    {id:'Pre-roll',name: 'Pre-roll'},\n    {id:'Mid-roll', name: 'Mid-roll'}\n]\nconst dataInStreamAdsStatus = [\n    {id: 'show', name: 'Hiện', status: 1},\n    {id: 'hide', name: 'Ẩn', status: 0},\n]\nconst dataInStreamAdsSkip = [\n    {id: 'yes', name: 'Có', can_skip: true},\n    {id: 'no', name: 'Không', can_skip: false}\n]\nconst dataInStreamAdsPlatForm = [\n    {id: 'all', name: 'Tất cả', is_all_platform: true},\n    {id: 'web', name:'Web', is_all_platform: false},\n    {id: 'iOS', name:'iOS', is_all_platform: false},\n    {id: 'Android', name:'Android', is_all_platform: false},\n    {id: 'AndroidTV', name:'AndroidTV', is_all_platform: false},\n    {id: 'Samsung-TV', name:'Samsung-TV', is_all_platform: false},\n    {id: 'LG-TV', name:'LG-TV', is_all_platform: false},\n]\nconst dataInStreamAdsContent = [\n    {id: 'all', name: 'Tất cả', is_all_content: true},\n    {id: 'filter', name: 'Chọn nội dung ...', is_all_content: false},\n]\nexport default PopupCreateNewAds\n"]},"metadata":{},"sourceType":"module"}