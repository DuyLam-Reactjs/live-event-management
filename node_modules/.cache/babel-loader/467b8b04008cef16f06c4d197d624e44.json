{"ast":null,"code":"var _jsxFileName = \"/Users/admin/Desktop/SourceDevVieON/LiveEvent/src/views/users/Users.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { CBadge, CCard, CCardBody, CCol, CDataTable, CRow, CButton, CDropdown, CDropdownToggle, CDropdownMenu, CDropdownItem, CPagination, CImg } from '@coreui/react';\nimport { useDispatch } from \"react-redux\";\nimport TitleAds from \"../LiveManagementEvent/TitleAds/TitleAds\";\nimport { parsedPageLimit } from \"../../helpers/common\";\nimport userApi from \"../../apis/userApi\";\nimport { openPopup } from \"../../actions/popup\";\nimport { POPUP } from \"../../constants/constants\";\nimport ConfigImage from \"../../config/ConfigImage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Users = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const [currentPageList, setCurrentPageList] = useState();\n  const [editField, setEditField] = useState();\n  const [currentPage, setCurrentPage] = useState(1);\n  const [rowPerPage, setRowPerPage] = useState(10);\n  const [maxPage, setMaxPage] = useState(1);\n  const [total, setTotal] = useState();\n  useEffect(() => {\n    userApi === null || userApi === void 0 ? void 0 : userApi.listUser('devtest1905@vieon.vn', currentPage, rowPerPage).then(res => {\n      const data = res === null || res === void 0 ? void 0 : res.data;\n\n      if (res === null || res === void 0 ? void 0 : res.success) {\n        var _data$metadata;\n\n        setCurrentPageList(data === null || data === void 0 ? void 0 : data.items);\n        setTotal(data === null || data === void 0 ? void 0 : (_data$metadata = data.metadata) === null || _data$metadata === void 0 ? void 0 : _data$metadata.total);\n      }\n    });\n  }, [currentPage, rowPerPage]);\n  useEffect(() => {\n    if (currentPageList) {\n      let max = parsedPageLimit(total, rowPerPage);\n      setMaxPage(max);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [total, rowPerPage]);\n  useEffect(() => {\n    let data = (currentPageList || []).map(i => ({ ...i,\n      isEdit: false\n    }));\n    data === null || data === void 0 ? void 0 : data.forEach(i => {\n      const user = editField === null || editField === void 0 ? void 0 : editField.find(j => j.id === i.id);\n      i.isEdit = user ? user.isEdit : false;\n    });\n    setEditField(data); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentPageList]);\n\n  const onChangePage = item => {\n    setRowPerPage(item === null || item === void 0 ? void 0 : item.value);\n  };\n\n  const handleSaveEdit = item => {\n    dispatch(openPopup({\n      name: POPUP.NAME.USER.EDIT_USER,\n      editField,\n      setEditField,\n      userItem: item\n    }));\n  };\n\n  const handleOpenDelete = item => {\n    dispatch(openPopup({\n      name: POPUP.NAME.USER.DELETE_USER,\n      item,\n      currentPage,\n      rowPerPage,\n      setCurrentPageList\n    }));\n  };\n\n  const field = true ? ['Email', 'Quyền hạn', \"Quản lý\"] : ['Email', 'Quyền hạn'];\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"justify-content-between\",\n      children: [/*#__PURE__*/_jsxDEV(TitleAds, {\n        title: 'User List'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CRow, {\n        children: /*#__PURE__*/_jsxDEV(CCol, {\n          children: /*#__PURE__*/_jsxDEV(CCard, {\n            children: /*#__PURE__*/_jsxDEV(CCardBody, {\n              children: /*#__PURE__*/_jsxDEV(CDataTable, {\n                items: currentPageList,\n                fields: field,\n                itemsPerPage: 10,\n                scopedSlots: {\n                  'Email': item => /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: item.email\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 103,\n                    columnNumber: 25\n                  }, this),\n                  'Quyền hạn': item => {\n                    var _item$role, _item$role2, _item$role3;\n\n                    return /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: [(item === null || item === void 0 ? void 0 : (_item$role = item.role) === null || _item$role === void 0 ? void 0 : _item$role.read) && /*#__PURE__*/_jsxDEV(CBadge, {\n                        children: /*#__PURE__*/_jsxDEV(CButton, {\n                          block: true,\n                          color: \"success\",\n                          children: \"Read\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 112,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 111,\n                        columnNumber: 31\n                      }, this), (item === null || item === void 0 ? void 0 : (_item$role2 = item.role) === null || _item$role2 === void 0 ? void 0 : _item$role2.write) && /*#__PURE__*/_jsxDEV(CBadge, {\n                        children: /*#__PURE__*/_jsxDEV(CButton, {\n                          block: true,\n                          color: \"success\",\n                          children: \"Write\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 119,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 118,\n                        columnNumber: 31\n                      }, this), (item === null || item === void 0 ? void 0 : (_item$role3 = item.role) === null || _item$role3 === void 0 ? void 0 : _item$role3.is_admin) && /*#__PURE__*/_jsxDEV(CBadge, {\n                        children: /*#__PURE__*/_jsxDEV(CButton, {\n                          block: true,\n                          color: \"success\",\n                          children: \"Admin\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 126,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 125,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 109,\n                      columnNumber: 29\n                    }, this);\n                  },\n                  'Quản lý': item => /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: [/*#__PURE__*/_jsxDEV(CBadge, {\n                      children: /*#__PURE__*/_jsxDEV(CButton, {\n                        block: true,\n                        color: \"info\",\n                        onClick: () => handleSaveEdit(item),\n                        children: [/*#__PURE__*/_jsxDEV(CImg, {\n                          src: ConfigImage.edit,\n                          alt: \"edit\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 140,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"ml-1\",\n                          children: \"Ch\\u1EC9nh s\\u1EEDa\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 141,\n                          columnNumber: 31\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 138,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 137,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(CBadge, {\n                      children: /*#__PURE__*/_jsxDEV(CButton, {\n                        block: true,\n                        color: \"danger\",\n                        onClick: () => handleOpenDelete(item),\n                        children: /*#__PURE__*/_jsxDEV(CImg, {\n                          src: ConfigImage.deleteAds,\n                          alt: \"delete\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 146,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 145,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 144,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 136,\n                    columnNumber: 25\n                  }, this)\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"m-1 d-flex justify-content-between align-items-center\",\n        children: [/*#__PURE__*/_jsxDEV(CDropdown, {\n          className: \"btn-group\",\n          style: {\n            width: '100px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(CDropdownToggle, {\n            color: \"default\",\n            className: \"shadow-none mb-2 row-page color-white\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"mr-2\",\n              style: {\n                color: '#222'\n              },\n              children: rowPerPage + ' dòng'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CDropdownMenu, {\n            children: rowPerPageList && (rowPerPageList || []).map((item, index) => {\n              return /*#__PURE__*/_jsxDEV(CDropdownItem, {\n                onClick: () => onChangePage(item),\n                children: item === null || item === void 0 ? void 0 : item.name\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CPagination, {\n          nextButton: 'Sau',\n          previousButton: 'Trước',\n          activePage: currentPage,\n          pages: maxPage,\n          onActivePageChange: setCurrentPage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Users, \"hm5b30nS2M8PqQLrpX2WEK/ylxI=\", false, function () {\n  return [useDispatch];\n});\n\n_c = Users;\nconst rowPerPageList = [{\n  id: 1,\n  name: '5 dòng',\n  value: 5\n}, {\n  id: 2,\n  name: '10 dòng',\n  value: 10\n}, {\n  id: 3,\n  name: '20 dòng',\n  value: 20\n}];\nexport default Users;\n\nvar _c;\n\n$RefreshReg$(_c, \"Users\");","map":{"version":3,"sources":["/Users/admin/Desktop/SourceDevVieON/LiveEvent/src/views/users/Users.js"],"names":["React","useState","useEffect","CBadge","CCard","CCardBody","CCol","CDataTable","CRow","CButton","CDropdown","CDropdownToggle","CDropdownMenu","CDropdownItem","CPagination","CImg","useDispatch","TitleAds","parsedPageLimit","userApi","openPopup","POPUP","ConfigImage","Users","dispatch","currentPageList","setCurrentPageList","editField","setEditField","currentPage","setCurrentPage","rowPerPage","setRowPerPage","maxPage","setMaxPage","total","setTotal","listUser","then","res","data","success","items","metadata","max","map","i","isEdit","forEach","user","find","j","id","onChangePage","item","value","handleSaveEdit","name","NAME","USER","EDIT_USER","userItem","handleOpenDelete","DELETE_USER","field","email","role","read","write","is_admin","edit","deleteAds","width","color","rowPerPageList","index"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SACEC,MADF,EAEEC,KAFF,EAGEC,SAHF,EAIEC,IAJF,EAKEC,UALF,EAMEC,IANF,EAOEC,OAPF,EAOWC,SAPX,EAOsBC,eAPtB,EAOuCC,aAPvC,EAOsDC,aAPtD,EAOqEC,WAPrE,EAOkFC,IAPlF,QAQO,eARP;AAUA,SAASC,WAAT,QAA4B,aAA5B;AACA,OAAOC,QAAP,MAAqB,0CAArB;AACA,SAAQC,eAAR,QAA8B,sBAA9B;AACA,OAAOC,OAAP,MAAoB,oBAApB;AACA,SAAQC,SAAR,QAAwB,qBAAxB;AACA,SAAQC,KAAR,QAAoB,2BAApB;AACA,OAAOC,WAAP,MAAwB,0BAAxB;;;AAEA,MAAMC,KAAK,GAAG,MAAM;AAAA;;AAClB,QAAMC,QAAQ,GAAGR,WAAW,EAA5B;AAGA,QAAM,CAACS,eAAD,EAAkBC,kBAAlB,IAAwCzB,QAAQ,EAAtD;AACA,QAAM,CAAC0B,SAAD,EAAYC,YAAZ,IAA4B3B,QAAQ,EAA1C;AAEA,QAAM,CAAC4B,WAAD,EAAcC,cAAd,IAAgC7B,QAAQ,CAAC,CAAD,CAA9C;AACA,QAAM,CAAC8B,UAAD,EAAaC,aAAb,IAA8B/B,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACgC,OAAD,EAAUC,UAAV,IAAwBjC,QAAQ,CAAC,CAAD,CAAtC;AACA,QAAM,CAACkC,KAAD,EAAQC,QAAR,IAAoBnC,QAAQ,EAAlC;AAGAC,EAAAA,SAAS,CAAC,MAAM;AACdiB,IAAAA,OAAO,SAAP,IAAAA,OAAO,WAAP,YAAAA,OAAO,CAAEkB,QAAT,CAAkB,sBAAlB,EAAyCR,WAAzC,EAAsDE,UAAtD,EAAkEO,IAAlE,CAAuEC,GAAG,IAAI;AAC5E,YAAMC,IAAI,GAAGD,GAAH,aAAGA,GAAH,uBAAGA,GAAG,CAAEC,IAAlB;;AACA,UAAID,GAAJ,aAAIA,GAAJ,uBAAIA,GAAG,CAAEE,OAAT,EAAiB;AAAA;;AACff,QAAAA,kBAAkB,CAACc,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAEE,KAAP,CAAlB;AACAN,QAAAA,QAAQ,CAACI,IAAD,aAACA,IAAD,yCAACA,IAAI,CAAEG,QAAP,mDAAC,eAAgBR,KAAjB,CAAR;AACD;AACF,KAND;AAOD,GARQ,EAQN,CAACN,WAAD,EAAcE,UAAd,CARM,CAAT;AAUA7B,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIuB,eAAJ,EAAqB;AACnB,UAAImB,GAAG,GAAG1B,eAAe,CAACiB,KAAD,EAAQJ,UAAR,CAAzB;AACAG,MAAAA,UAAU,CAACU,GAAD,CAAV;AACD,KAJa,CAKd;;AACD,GANQ,EAMN,CAACT,KAAD,EAAQJ,UAAR,CANM,CAAT;AAQA7B,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIsC,IAAI,GAAG,CAACf,eAAe,IAAI,EAApB,EAAwBoB,GAAxB,CAA4BC,CAAC,KAAK,EAAE,GAAGA,CAAL;AAAQC,MAAAA,MAAM,EAAE;AAAhB,KAAL,CAA7B,CAAX;AACAP,IAAAA,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEQ,OAAN,CAAcF,CAAC,IAAI;AACjB,YAAMG,IAAI,GAAGtB,SAAH,aAAGA,SAAH,uBAAGA,SAAS,CAAEuB,IAAX,CAAgBC,CAAC,IAAIA,CAAC,CAACC,EAAF,KAASN,CAAC,CAACM,EAAhC,CAAb;AACAN,MAAAA,CAAC,CAACC,MAAF,GAAWE,IAAI,GAAGA,IAAI,CAACF,MAAR,GAAiB,KAAhC;AACD,KAHD;AAIAnB,IAAAA,YAAY,CAACY,IAAD,CAAZ,CANc,CAOd;AACD,GARQ,EAQN,CAACf,eAAD,CARM,CAAT;;AAUA,QAAM4B,YAAY,GAAIC,IAAD,IAAU;AAC7BtB,IAAAA,aAAa,CAACsB,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAEC,KAAP,CAAb;AACD,GAFD;;AAIA,QAAMC,cAAc,GAAIF,IAAD,IAAU;AAC/B9B,IAAAA,QAAQ,CAACJ,SAAS,CAAC;AACjBqC,MAAAA,IAAI,EAAEpC,KAAK,CAACqC,IAAN,CAAWC,IAAX,CAAgBC,SADL;AAEjBjC,MAAAA,SAFiB;AAGjBC,MAAAA,YAHiB;AAIjBiC,MAAAA,QAAQ,EAAEP;AAJO,KAAD,CAAV,CAAR;AAMD,GAPD;;AAWA,QAAMQ,gBAAgB,GAAIR,IAAD,IAAU;AACjC9B,IAAAA,QAAQ,CAACJ,SAAS,CAAC;AACjBqC,MAAAA,IAAI,EAAEpC,KAAK,CAACqC,IAAN,CAAWC,IAAX,CAAgBI,WADL;AAEjBT,MAAAA,IAFiB;AAGjBzB,MAAAA,WAHiB;AAIjBE,MAAAA,UAJiB;AAKjBL,MAAAA;AALiB,KAAD,CAAV,CAAR;AAOD,GARD;;AAWA,QAAMsC,KAAK,GAAG,OAAO,CAAC,OAAD,EAAU,WAAV,EAAuB,SAAvB,CAAP,GAA2C,CAAC,OAAD,EAAU,WAAV,CAAzD;AACA,sBACE,QAAC,KAAD,CAAO,QAAP;AAAA,2BACE;AAAK,MAAA,SAAS,EAAC,yBAAf;AAAA,8BACE,QAAC,QAAD;AAAU,QAAA,KAAK,EAAE;AAAjB;AAAA;AAAA;AAAA;AAAA,cADF,eAEE,QAAC,IAAD;AAAA,+BACE,QAAC,IAAD;AAAA,iCACE,QAAC,KAAD;AAAA,mCACE,QAAC,SAAD;AAAA,qCACE,QAAC,UAAD;AACE,gBAAA,KAAK,EAAGvC,eADV;AAEE,gBAAA,MAAM,EAAEuC,KAFV;AAGE,gBAAA,YAAY,EAAE,EAHhB;AAIE,gBAAA,WAAW,EAAE;AACX,2BACGV,IAAD,iBACE;AAAA,8BACGA,IAAI,CAACW;AADR;AAAA;AAAA;AAAA;AAAA,0BAHO;AAOX,+BACGX,IAAD;AAAA;;AAAA,wCACM;AAAA,iCACG,CAAAA,IAAI,SAAJ,IAAAA,IAAI,WAAJ,0BAAAA,IAAI,CAAEY,IAAN,0DAAYC,IAAZ,kBACD,QAAC,MAAD;AAAA,+CACE,QAAC,OAAD;AAAS,0BAAA,KAAK,MAAd;AAAe,0BAAA,KAAK,EAAC,SAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,8BAFF,EAQG,CAAAb,IAAI,SAAJ,IAAAA,IAAI,WAAJ,2BAAAA,IAAI,CAAEY,IAAN,4DAAYE,KAAZ,kBACD,QAAC,MAAD;AAAA,+CACE,QAAC,OAAD;AAAS,0BAAA,KAAK,MAAd;AAAe,0BAAA,KAAK,EAAC,SAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,8BATF,EAeG,CAAAd,IAAI,SAAJ,IAAAA,IAAI,WAAJ,2BAAAA,IAAI,CAAEY,IAAN,4DAAYG,QAAZ,kBACD,QAAC,MAAD;AAAA,+CACE,QAAC,OAAD;AAAS,0BAAA,KAAK,MAAd;AAAe,0BAAA,KAAK,EAAC,SAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,8BAhBF;AAAA;AAAA;AAAA;AAAA;AAAA,4BADN;AAAA,mBARS;AAkCX,6BACGf,IAAD,iBACE;AAAA,4CACE,QAAC,MAAD;AAAA,6CACE,QAAC,OAAD;AAAS,wBAAA,KAAK,MAAd;AAAe,wBAAA,KAAK,EAAC,MAArB;AAA4B,wBAAA,OAAO,EAAE,MAAIE,cAAc,CAACF,IAAD,CAAvD;AAAA,gDAEE,QAAC,IAAD;AAAM,0BAAA,GAAG,EAAEhC,WAAW,CAACgD,IAAvB;AAA6B,0BAAA,GAAG,EAAC;AAAjC;AAAA;AAAA;AAAA;AAAA,gCAFF,eAGE;AAAM,0BAAA,SAAS,EAAC,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAHF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,4BADF,eAQE,QAAC,MAAD;AAAA,6CACE,QAAC,OAAD;AAAS,wBAAA,KAAK,MAAd;AAAe,wBAAA,KAAK,EAAC,QAArB;AAA8B,wBAAA,OAAO,EAAE,MAAIR,gBAAgB,CAACR,IAAD,CAA3D;AAAA,+CACE,QAAC,IAAD;AAAM,0BAAA,GAAG,EAAEhC,WAAW,CAACiD,SAAvB;AAAkC,0BAAA,GAAG,EAAC;AAAtC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,4BARF;AAAA;AAAA;AAAA;AAAA;AAAA;AApCO;AAJf;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAFF,eAoEE;AAAK,QAAA,SAAS,EAAC,uDAAf;AAAA,gCACE,QAAC,SAAD;AAAW,UAAA,SAAS,EAAC,WAArB;AAAiC,UAAA,KAAK,EAAE;AAAEC,YAAAA,KAAK,EAAE;AAAT,WAAxC;AAAA,kCACE,QAAC,eAAD;AAAiB,YAAA,KAAK,EAAC,SAAvB;AAAiC,YAAA,SAAS,EAAC,uCAA3C;AAAA,mCACE;AAAM,cAAA,SAAS,EAAC,MAAhB;AAAuB,cAAA,KAAK,EAAE;AAAEC,gBAAAA,KAAK,EAAE;AAAT,eAA9B;AAAA,wBAAiD1C,UAAU,GAAG;AAA9D;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF,eAIE,QAAC,aAAD;AAAA,sBACG2C,cAAc,IAAI,CAACA,cAAc,IAAI,EAAnB,EAAuB7B,GAAvB,CAA2B,CAACS,IAAD,EAAOqB,KAAP,KAAiB;AAC7D,kCACE,QAAC,aAAD;AAA2B,gBAAA,OAAO,EAAE,MAAItB,YAAY,CAACC,IAAD,CAApD;AAAA,0BAA6DA,IAA7D,aAA6DA,IAA7D,uBAA6DA,IAAI,CAAEG;AAAnE,iBAAoBkB,KAApB;AAAA;AAAA;AAAA;AAAA,sBADF;AAGD,aAJkB;AADrB;AAAA;AAAA;AAAA;AAAA,kBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAcE,QAAC,WAAD;AACE,UAAA,UAAU,EAAE,KADd;AAEE,UAAA,cAAc,EAAE,OAFlB;AAGE,UAAA,UAAU,EAAE9C,WAHd;AAIE,UAAA,KAAK,EAAEI,OAJT;AAKE,UAAA,kBAAkB,EAAEH;AALtB;AAAA;AAAA;AAAA;AAAA,gBAdF;AAAA;AAAA;AAAA;AAAA;AAAA,cApEF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AA+FD,CAnKD;;GAAMP,K;UACaP,W;;;KADbO,K;AAoKN,MAAMmD,cAAc,GAAG,CACrB;AAAEtB,EAAAA,EAAE,EAAE,CAAN;AAASK,EAAAA,IAAI,EAAE,QAAf;AAAyBF,EAAAA,KAAK,EAAE;AAAhC,CADqB,EAErB;AAAEH,EAAAA,EAAE,EAAE,CAAN;AAASK,EAAAA,IAAI,EAAE,SAAf;AAA0BF,EAAAA,KAAK,EAAE;AAAjC,CAFqB,EAGrB;AAAEH,EAAAA,EAAE,EAAE,CAAN;AAASK,EAAAA,IAAI,EAAE,SAAf;AAA0BF,EAAAA,KAAK,EAAE;AAAjC,CAHqB,CAAvB;AAMA,eAAehC,KAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport {\n  CBadge,\n  CCard,\n  CCardBody,\n  CCol,\n  CDataTable,\n  CRow,\n  CButton, CDropdown, CDropdownToggle, CDropdownMenu, CDropdownItem, CPagination, CImg,\n} from '@coreui/react'\n\nimport { useDispatch } from \"react-redux\";\nimport TitleAds from \"../LiveManagementEvent/TitleAds/TitleAds\";\nimport {parsedPageLimit} from \"../../helpers/common\";\nimport userApi from \"../../apis/userApi\";\nimport {openPopup} from \"../../actions/popup\";\nimport {POPUP} from \"../../constants/constants\";\nimport ConfigImage from \"../../config/ConfigImage\";\n\nconst Users = () => {\n  const dispatch = useDispatch();\n\n\n  const [currentPageList, setCurrentPageList] = useState()\n  const [editField, setEditField] = useState();\n\n  const [currentPage, setCurrentPage] = useState(1);\n  const [rowPerPage, setRowPerPage] = useState(10);\n  const [maxPage, setMaxPage] = useState(1);\n  const [total, setTotal] = useState()\n\n\n  useEffect(() => {\n    userApi?.listUser('devtest1905@vieon.vn',currentPage, rowPerPage).then(res => {\n      const data = res?.data\n      if (res?.success){\n        setCurrentPageList(data?.items)\n        setTotal(data?.metadata?.total)\n      }\n    })\n  }, [currentPage, rowPerPage])\n\n  useEffect(() => {\n    if (currentPageList) {\n      let max = parsedPageLimit(total, rowPerPage)\n      setMaxPage(max)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [total, rowPerPage])\n\n  useEffect(() => {\n    let data = (currentPageList || []).map(i => ({ ...i, isEdit: false }));\n    data?.forEach(i => {\n      const user = editField?.find(j => j.id === i.id);\n      i.isEdit = user ? user.isEdit : false;\n    })\n    setEditField(data)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentPageList])\n\n  const onChangePage = (item) => {\n    setRowPerPage(item?.value)\n  }\n\n  const handleSaveEdit = (item) => {\n    dispatch(openPopup({\n      name: POPUP.NAME.USER.EDIT_USER,\n      editField,\n      setEditField,\n      userItem: item\n    }))\n  }\n\n\n\n  const handleOpenDelete = (item) => {\n    dispatch(openPopup({\n      name: POPUP.NAME.USER.DELETE_USER,\n      item,\n      currentPage,\n      rowPerPage,\n      setCurrentPageList\n    }))\n  }\n\n\n  const field = true ? ['Email', 'Quyền hạn', \"Quản lý\"] : ['Email', 'Quyền hạn']\n  return (\n    <React.Fragment>\n      <div className='justify-content-between'>\n        <TitleAds title={'User List'}/>\n        <CRow>\n          <CCol>\n            <CCard>\n              <CCardBody>\n                <CDataTable\n                  items={ currentPageList}\n                  fields={field}\n                  itemsPerPage={10}\n                  scopedSlots={{\n                    'Email':\n                      (item) => (\n                        <td>\n                          {item.email}\n                        </td>\n                      ),\n                    'Quyền hạn':\n                      (item) => (\n                            <td >\n                              {item?.role?.read &&\n                              <CBadge>\n                                <CButton block color=\"success\">\n                                   Read\n                                </CButton>\n                              </CBadge>\n                              }\n                              {item?.role?.write &&\n                              <CBadge>\n                                <CButton block color=\"success\">\n                                  Write\n                                </CButton>\n                              </CBadge>\n                              }\n                              {item?.role?.is_admin &&\n                              <CBadge>\n                                <CButton block color=\"success\">\n                                  Admin\n                                </CButton>\n                              </CBadge>\n                              }\n                            </td>\n                          ),\n\n                    'Quản lý':\n                      (item) => (\n                        <td>\n                          <CBadge>\n                            <CButton block color=\"info\" onClick={()=>handleSaveEdit(item)}>\n                              {/*<CIcon  name={'cil-pencil'}/> */}\n                              <CImg src={ConfigImage.edit} alt=\"edit\" />\n                              <span className=\"ml-1\">Chỉnh sửa</span>\n                            </CButton>\n                          </CBadge>\n                          <CBadge>\n                            <CButton block color=\"danger\" onClick={()=>handleOpenDelete(item)}>\n                              <CImg src={ConfigImage.deleteAds} alt=\"delete\"/>\n                            </CButton>\n                          </CBadge>\n                        </td>\n                      ),\n\n                  }}\n                />\n              </CCardBody>\n            </CCard>\n          </CCol>\n        </CRow>\n        <div className=\"m-1 d-flex justify-content-between align-items-center\">\n          <CDropdown className=\"btn-group\" style={{ width: '100px',  }}>\n            <CDropdownToggle color=\"default\" className='shadow-none mb-2 row-page color-white'>\n              <span className=\"mr-2\" style={{ color: '#222'}}>{rowPerPage + ' dòng'}</span>\n            </CDropdownToggle>\n            <CDropdownMenu>\n              {rowPerPageList && (rowPerPageList || []).map((item, index) => {\n                return (\n                  <CDropdownItem key={index} onClick={()=>onChangePage(item)}>{item?.name}</CDropdownItem>\n                )\n              })\n              }\n            </CDropdownMenu>\n          </CDropdown>\n          <CPagination\n            nextButton={'Sau'}\n            previousButton={'Trước'}\n            activePage={currentPage}\n            pages={maxPage}\n            onActivePageChange={setCurrentPage}\n          />\n        </div>\n      </div>\n    </React.Fragment>\n  )\n}\nconst rowPerPageList = [\n  { id: 1, name: '5 dòng', value: 5 },\n  { id: 2, name: '10 dòng', value: 10 },\n  { id: 3, name: '20 dòng', value: 20 },\n]\n\nexport default Users\n"]},"metadata":{},"sourceType":"module"}