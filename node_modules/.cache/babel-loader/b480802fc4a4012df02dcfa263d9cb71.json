{"ast":null,"code":"import _regeneratorRuntime from\"/Users/admin/Desktop/SourceDevVieON/LiveEvent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/admin/Desktop/SourceDevVieON/LiveEvent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/admin/Desktop/SourceDevVieON/LiveEvent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/admin/Desktop/SourceDevVieON/LiveEvent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{CButton,CCard,CCardBody,CCardGroup,CCol,CContainer,CForm,CInput,CInputGroup,CInputGroupPrepend,CInputGroupText,CRow}from'@coreui/react';import CIcon from'@coreui/icons-react';import{validateEmail,saveAccessToken}from\"../../../helpers/common\";import{useHistory,useLocation}from\"react-router-dom\";import UserApi from\"../../../apis/userApi\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var queryString=require('query-string');var Login=function Login(){var _useState=useState({email:'',password:''}),_useState2=_slicedToArray(_useState,2),emailValue=_useState2[0],setEmail=_useState2[1];var history=useHistory();var location=useLocation();var parsedURL=queryString.parse(location.search);var _useState3=useState({errorUserName:'',errorPassword:''}),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),validatedEmail=_useState6[0],setValidatedEmail=_useState6[1];var onChangeUserName=function onChangeUserName(e){var _e$target;var value=(_e$target=e.target)===null||_e$target===void 0?void 0:_e$target.value;var checkValueEmail=validateEmail(value);setValidatedEmail(checkValueEmail);setEmail(_objectSpread(_objectSpread({},emailValue),{},{email:value}));};var onChangePassWord=function onChangePassWord(e){var value=e.target.value;setEmail(_objectSpread(_objectSpread({},emailValue),{},{password:value}));};var onLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var timeNow;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:timeNow=new Date();timeNow.setFullYear(timeNow.getFullYear()+1);if(validatedEmail){UserApi.login(emailValue===null||emailValue===void 0?void 0:emailValue.email,emailValue===null||emailValue===void 0?void 0:emailValue.password).then(function(res){var data=res.data;var accessToken=data===null||data===void 0?void 0:data.accessToken;var url=parsedURL===null||parsedURL===void 0?void 0:parsedURL.rel;saveAccessToken(accessToken);if(accessToken){history.push(url!=='/'?url:'/instream-ads/content-provider-list');// save cookie\n}else{setError(_objectSpread(_objectSpread({},error),{},{errorPassword:data===null||data===void 0?void 0:data.message}));}});}else{setError(_objectSpread(_objectSpread({},error),{},{errorUserName:'Email không hợp lệ'}));}case 3:case\"end\":return _context.stop();}}},_callee);}));return function onLogin(){return _ref.apply(this,arguments);};}();var handleKeyPress=function handleKeyPress(event){if(event.key==='Enter'){onLogin();}};return/*#__PURE__*/_jsx(\"div\",{className:\"c-app c-default-layout flex-row align-items-center\",children:/*#__PURE__*/_jsx(CContainer,{children:/*#__PURE__*/_jsx(CRow,{className:\"justify-content-center\",children:/*#__PURE__*/_jsx(CCol,{md:\"9\",lg:\"7\",xl:\"6\",children:/*#__PURE__*/_jsx(CCardGroup,{children:/*#__PURE__*/_jsx(CCard,{className:\"p-4\",children:/*#__PURE__*/_jsx(CCardBody,{children:/*#__PURE__*/_jsxs(CForm,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Sign In to your account\"}),/*#__PURE__*/_jsxs(CInputGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(CInputGroupPrepend,{children:/*#__PURE__*/_jsx(CInputGroupText,{children:/*#__PURE__*/_jsx(CIcon,{name:\"cil-user\"})})}),/*#__PURE__*/_jsx(CInput,{type:\"text\",placeholder:\"Username\",autoComplete:\"username\",onChange:onChangeUserName,onKeyPress:handleKeyPress})]}),(error===null||error===void 0?void 0:error.errorUserName)&&/*#__PURE__*/_jsx(\"p\",{className:\"text\",style:{color:'red',textAlign:'end'},children:error===null||error===void 0?void 0:error.errorUserName}),/*#__PURE__*/_jsxs(CInputGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(CInputGroupPrepend,{children:/*#__PURE__*/_jsx(CInputGroupText,{children:/*#__PURE__*/_jsx(CIcon,{name:\"cil-lock-locked\"})})}),/*#__PURE__*/_jsx(CInput,{type:\"password\",placeholder:\"Password\",autoComplete:\"current-password\",onChange:onChangePassWord,onKeyPress:handleKeyPress})]}),(error===null||error===void 0?void 0:error.errorPassword)&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red',textAlign:'end'},children:error===null||error===void 0?void 0:error.errorPassword}),/*#__PURE__*/_jsx(CButton,{color:\"success\",className:\"px-4\",block:true,onClick:onLogin,children:\"Login\"})]})})})})})})})});};export default Login;","map":{"version":3,"sources":["/Users/admin/Desktop/SourceDevVieON/LiveEvent/src/views/users/login/Login.js"],"names":["React","useState","CButton","CCard","CCardBody","CCardGroup","CCol","CContainer","CForm","CInput","CInputGroup","CInputGroupPrepend","CInputGroupText","CRow","CIcon","validateEmail","saveAccessToken","useHistory","useLocation","UserApi","queryString","require","Login","email","password","emailValue","setEmail","history","location","parsedURL","parse","search","errorUserName","errorPassword","error","setError","validatedEmail","setValidatedEmail","onChangeUserName","e","value","target","checkValueEmail","onChangePassWord","onLogin","timeNow","Date","setFullYear","getFullYear","login","then","res","data","accessToken","url","rel","push","message","handleKeyPress","event","key","color","textAlign"],"mappings":"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","sourcesContent":["import React, { useState} from 'react'\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CCardGroup,\n  CCol,\n  CContainer,\n  CForm,\n  CInput,\n  CInputGroup,\n  CInputGroupPrepend,\n  CInputGroupText,\n  CRow\n} from '@coreui/react'\nimport CIcon from '@coreui/icons-react'\nimport {validateEmail, saveAccessToken} from \"../../../helpers/common\";\n\nimport {\n  useHistory, useLocation,\n} from \"react-router-dom\"\nimport UserApi from \"../../../apis/userApi\";\n\n\nconst queryString = require('query-string');\n\n\nconst Login = () => {\n  const [emailValue, setEmail] = useState({\n    email:'',\n    password:'',\n  })\n  const history = useHistory()\n  const location = useLocation();\n\n  const parsedURL = queryString.parse(location.search)\n\n  const [error, setError] = useState({\n    errorUserName: '',\n    errorPassword: '',\n  })\n\n  const [validatedEmail, setValidatedEmail] = useState(false)\n\n  const onChangeUserName = (e) => {\n    const value = e.target?.value\n    const checkValueEmail = validateEmail(value)\n    setValidatedEmail(checkValueEmail)\n    setEmail({...emailValue, email: value})\n  }\n  const onChangePassWord = (e) => {\n    const value = e.target.value\n    setEmail({...emailValue, password: value})\n  }\n\n  const onLogin = async () => {\n    const timeNow = new Date()\n    timeNow.setFullYear(timeNow.getFullYear() + 1)\n    if (validatedEmail){\n      UserApi.login(emailValue?.email, emailValue?.password).then(res=>{\n        const data = res.data\n        const accessToken = data?.accessToken\n        const url = parsedURL?.rel\n        saveAccessToken(accessToken)\n        if (accessToken){\n          history.push(\n              url !== '/'\n              ? url\n              : '/instream-ads/content-provider-list')\n          // save cookie\n        }else {\n          setError({...error, errorPassword: data?.message})\n        }\n      })\n    }else {\n      setError({...error, errorUserName: 'Email không hợp lệ' })\n    }\n\n  }\n  const handleKeyPress = (event) => {\n    if (event.key === 'Enter') {\n      onLogin()\n    }\n  }\n\n  return (\n    <div className=\"c-app c-default-layout flex-row align-items-center\">\n      <CContainer>\n        <CRow className=\"justify-content-center\">\n          <CCol md=\"9\" lg=\"7\" xl=\"6\">\n            <CCardGroup>\n              <CCard className=\"p-4\">\n                <CCardBody>\n                  <CForm>\n                    <h1>Login</h1>\n                    <p className=\"text-muted\">Sign In to your account</p>\n                    <CInputGroup className=\"mb-3\">\n                      <CInputGroupPrepend>\n                        <CInputGroupText>\n                          <CIcon name=\"cil-user\" />\n                        </CInputGroupText>\n                      </CInputGroupPrepend>\n                      <CInput type=\"text\" placeholder=\"Username\" autoComplete=\"username\"\n                              onChange={onChangeUserName}\n                              onKeyPress={handleKeyPress}/>\n                    </CInputGroup>\n                    {error?.errorUserName &&\n                      <p className=\"text\" style={{color: 'red', textAlign: 'end'}}>{error?.errorUserName}</p>\n                    }\n                    <CInputGroup className=\"mb-3\">\n                      <CInputGroupPrepend>\n                        <CInputGroupText>\n                          <CIcon name=\"cil-lock-locked\" />\n                        </CInputGroupText>\n                      </CInputGroupPrepend>\n                      <CInput type=\"password\" placeholder=\"Password\" autoComplete=\"current-password\"\n                              onChange={onChangePassWord}\n                              onKeyPress={handleKeyPress}/>\n                    </CInputGroup>\n                    {error?.errorPassword &&\n                      <p  style={{color: 'red', textAlign: 'end'}}>{error?.errorPassword}</p>\n                    }\n                    <CButton color=\"success\" className=\"px-4\" block onClick={onLogin}>Login</CButton>\n                  </CForm>\n                </CCardBody>\n              </CCard>\n            </CCardGroup>\n          </CCol>\n        </CRow>\n      </CContainer>\n    </div>\n  )\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}