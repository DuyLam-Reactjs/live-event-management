{"ast":null,"code":"import _slicedToArray from\"/Users/admin/Desktop/SourceDevVieON/LiveEvent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{CButton,CModal,CModalBody,CDropdown,CDropdownItem,CDropdownMenu,CDropdownToggle,CModalHeader,CInputGroupAppend,CInput,CInputGroup,CPagination,CInputGroupText}from\"@coreui/react\";import CIcon from'@coreui/icons-react';import{freeSet}from'@coreui/icons';import contentApi from\"../../../apis/contentApi\";import{parsedPageLimit}from\"../../../helpers/common\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PopupContent=function PopupContent(props){var content=props.content,setContent=props.setContent,modal=props.modal,setModal=props.setModal,setValue=props.setValue;var _useState=useState(),_useState2=_slicedToArray(_useState,2),currentPageList=_useState2[0],setCurrentPageList=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),total=_useState4[0],setTotal=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),currentPage=_useState6[0],setCurrentPage=_useState6[1];var _useState7=useState(10),_useState8=_slicedToArray(_useState7,2),rowPerPage=_useState8[0],setRowPerPage=_useState8[1];var _useState9=useState(1),_useState10=_slicedToArray(_useState9,2),maxPage=_useState10[0],setMaxPage=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),keyWord=_useState12[0],setKeyWord=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),category=_useState14[0],setCategory=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),type=_useState16[0],setType=_useState16[1];var _useState17=useState(content===null||content===void 0?void 0:content.title),_useState18=_slicedToArray(_useState17,2),data=_useState18[0],setData=_useState18[1];var _useState19=useState(),_useState20=_slicedToArray(_useState19,2),dataType=_useState20[0],setDataType=_useState20[1];useEffect(function(){contentApi===null||contentApi===void 0?void 0:contentApi.getContentType().then(function(res){var data=res===null||res===void 0?void 0:res.data;if(res.success){setDataType(data===null||data===void 0?void 0:data.items);}});},[]);var _useState21=useState(),_useState22=_slicedToArray(_useState21,2),dataCategories=_useState22[0],setDataCategories=_useState22[1];useEffect(function(){contentApi===null||contentApi===void 0?void 0:contentApi.getContentCategories().then(function(res){var data=res===null||res===void 0?void 0:res.data;if(res.success){setDataCategories(data===null||data===void 0?void 0:data.items);}});},[]);useEffect(function(){if(currentPageList){var max=parsedPageLimit(total,rowPerPage);setMaxPage(max);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[total,rowPerPage]);useEffect(function(){if(!keyWord&&!(category===null||category===void 0?void 0:category.id)&&!(type===null||type===void 0?void 0:type.id)){contentApi===null||contentApi===void 0?void 0:contentApi.getContentList(currentPage-1,rowPerPage,keyWord,category===null||category===void 0?void 0:category.id,type===null||type===void 0?void 0:type.id).then(function(res){var data=res===null||res===void 0?void 0:res.data;if(res===null||res===void 0?void 0:res.success){var _data$metadata;setCurrentPageList(data===null||data===void 0?void 0:data.items);setTotal(data===null||data===void 0?void 0:(_data$metadata=data.metadata)===null||_data$metadata===void 0?void 0:_data$metadata.total);}});}else searchAndFilter();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[currentPage,rowPerPage,keyWord,category===null||category===void 0?void 0:category.id,type===null||type===void 0?void 0:type.id]);useEffect(function(){setData(content===null||content===void 0?void 0:content.title);},[content===null||content===void 0?void 0:content.title]);var searchAndFilter=function searchAndFilter(){contentApi.getContentList(currentPage-1,rowPerPage,keyWord,category===null||category===void 0?void 0:category.id,type===null||type===void 0?void 0:type.id).then(function(res){if(res.success){var _data$metadata2;var _data=res===null||res===void 0?void 0:res.data;setCurrentPageList(_data===null||_data===void 0?void 0:_data.items);setTotal(_data===null||_data===void 0?void 0:(_data$metadata2=_data.metadata)===null||_data$metadata2===void 0?void 0:_data$metadata2.total);}});};var handleChangeType=function handleChangeType(item){setType(item);};var handleChangeGenre=function handleChangeGenre(item){setCategory(item);};var handleChangeKeyword=function handleChangeKeyword(event){setKeyWord(event.target.value);};var handleKeyPress=function handleKeyPress(event){if(event.key==='Enter'){searchAndFilter();}};var handleClose=function handleClose(){setModal(false);setData(content===null||content===void 0?void 0:content.title);};var handleSelect=function handleSelect(data){setModal(false);setContent&&setContent(data);setValue&&setValue(data===null||data===void 0?void 0:data.name);};return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(CModal,{closeOnBackdrop:false,size:'',show:modal,onClose:handleClose,centered:true,children:[/*#__PURE__*/_jsx(CModalHeader,{style:{backgroundColor:'#646464'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-100 d-flex justify-content-between align-items-center\",style:{color:\"#FFF\"},children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mb-0\",children:\"Ch\\u1ECDn n\\u1ED9i dung\"}),/*#__PURE__*/_jsx(CButton,{className:\"p-0 shadow-none\",onClick:handleClose,children:/*#__PURE__*/_jsx(CIcon,{name:\"cil-x\",style:{color:\"#FFF\"}})})]})}),/*#__PURE__*/_jsx(CModalBody,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-row mb-2\",children:[/*#__PURE__*/_jsxs(CDropdown,{className:\"m-1 btn-group\",style:{width:'300px'},children:[/*#__PURE__*/_jsx(CDropdownToggle,{color:\"default\",className:\"border\",children:/*#__PURE__*/_jsx(\"span\",{className:\"mr-2\",style:{color:'#222'},children:type===''?'Loại nội dung':type===null||type===void 0?void 0:type.name})}),/*#__PURE__*/_jsx(CDropdownMenu,{children:dataType&&(dataType||[]).map(function(item,index){return/*#__PURE__*/_jsx(CDropdownItem,{onClick:function onClick(){return handleChangeType(item);},children:item===null||item===void 0?void 0:item.name},index);})})]}),/*#__PURE__*/_jsxs(CDropdown,{className:\"m-1 btn-group\",style:{width:'200px'},children:[/*#__PURE__*/_jsx(CDropdownToggle,{color:\"default\",className:\"border\",children:/*#__PURE__*/_jsx(\"span\",{className:\"mr-2\",style:{color:'#222'},children:category===''?'Thể loại':category===null||category===void 0?void 0:category.name})}),/*#__PURE__*/_jsx(CDropdownMenu,{children:dataCategories&&(dataCategories||[]).map(function(item,index){return/*#__PURE__*/_jsx(CDropdownItem,{onClick:function onClick(){return handleChangeGenre(item);},children:item===null||item===void 0?void 0:item.name},index);})})]}),/*#__PURE__*/_jsxs(CInputGroup,{className:\"m-1\",children:[/*#__PURE__*/_jsx(CInput,{name:\"keyword\",type:\"text\",value:keyWord,placeholder:\"T\\xECm phim / show / k\\xEAnh\",style:{color:'#222'},onChange:handleChangeKeyword,onKeyPress:handleKeyPress}),/*#__PURE__*/_jsx(CInputGroupAppend,{style:{cursor:\"pointer\"},onClick:searchAndFilter,children:/*#__PURE__*/_jsx(CInputGroupText,{children:/*#__PURE__*/_jsx(CIcon,{content:freeSet.cilSearch})})})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[currentPageList&&currentPageList.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"m-1 mb-2 d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"strong\",{children:item.name}),/*#__PURE__*/_jsx(CButton,{className:\"shadow-none\",name:item.title,color:\"success\",variant:(data===null||data===void 0?void 0:data.title)===item.title?\"\":\"outline\",onClick:function onClick(){return handleSelect(item);},children:\"Ch\\u1ECDn\"})]},index);}),/*#__PURE__*/_jsxs(\"div\",{className:\"m-1 mt-4 d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(CDropdown,{className:\"btn-group\",style:{width:'100px'},children:[/*#__PURE__*/_jsx(CDropdownToggle,{color:\"default\",className:\"shadow-none row-page color-white\",children:/*#__PURE__*/_jsx(\"span\",{className:\"mr-2\",style:{color:'#222'},children:rowPerPage+' dòng'})}),/*#__PURE__*/_jsx(CDropdownMenu,{children:rowPerPageList&&(rowPerPageList||[]).map(function(item,index){return/*#__PURE__*/_jsx(CDropdownItem,{onClick:function onClick(){return setRowPerPage(item===null||item===void 0?void 0:item.value);},children:item===null||item===void 0?void 0:item.name},index);})})]}),/*#__PURE__*/_jsx(CPagination,{nextButton:'Sau',previousButton:'Trước',activePage:currentPage,pages:maxPage,onActivePageChange:setCurrentPage})]})]})]})})]})});};var rowPerPageList=[{id:1,name:'5 dòng',value:5},{id:2,name:'10 dòng',value:10},{id:3,name:'20 dòng',value:20}];export default PopupContent;","map":{"version":3,"sources":["/Users/admin/Desktop/SourceDevVieON/LiveEvent/src/views/instream-ads/Popup/PopupContent.js"],"names":["React","useEffect","useState","CButton","CModal","CModalBody","CDropdown","CDropdownItem","CDropdownMenu","CDropdownToggle","CModalHeader","CInputGroupAppend","CInput","CInputGroup","CPagination","CInputGroupText","CIcon","freeSet","contentApi","parsedPageLimit","PopupContent","props","content","setContent","modal","setModal","setValue","currentPageList","setCurrentPageList","total","setTotal","currentPage","setCurrentPage","rowPerPage","setRowPerPage","maxPage","setMaxPage","keyWord","setKeyWord","category","setCategory","type","setType","title","data","setData","dataType","setDataType","getContentType","then","res","success","items","dataCategories","setDataCategories","getContentCategories","max","id","getContentList","metadata","searchAndFilter","handleChangeType","item","handleChangeGenre","handleChangeKeyword","event","target","value","handleKeyPress","key","handleClose","handleSelect","name","backgroundColor","color","width","map","index","cursor","cilSearch","rowPerPageList"],"mappings":"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","sourcesContent":["\nimport React, { useEffect, useState } from 'react'\nimport {\n  CButton,\n  CModal,\n  CModalBody,\n  CDropdown, CDropdownItem, CDropdownMenu, CDropdownToggle,\n  CModalHeader,\n  CInputGroupAppend,\n  CInput,\n  CInputGroup,\n  CPagination,\n  CInputGroupText,\n} from \"@coreui/react\";\nimport CIcon from '@coreui/icons-react'\nimport { freeSet } from '@coreui/icons'\nimport contentApi from \"../../../apis/contentApi\";\n\nimport {parsedPageLimit} from \"../../../helpers/common\";\n\nconst PopupContent = (props) => {\n  const { content, setContent, modal, setModal, setValue } = props;\n\n\n  const [currentPageList, setCurrentPageList] = useState()\n  const [total, setTotal] = useState()\n  const [currentPage, setCurrentPage] = useState(1);\n\n  const [rowPerPage, setRowPerPage] = useState(10);\n  const [maxPage, setMaxPage] = useState(1);\n\n  const [keyWord, setKeyWord] = useState('')\n  const [category, setCategory] = useState('')\n  const [type, setType] = useState('')\n\n  const [data, setData] = useState(content?.title)\n\n  const [dataType, setDataType] = useState()\n  useEffect(()=>{\n    contentApi?.getContentType().then(res=>{\n      const data = res?.data\n      if (res.success) {\n        setDataType(data?.items)\n      }\n    })\n  },[])\n  const [dataCategories, setDataCategories] = useState()\n  useEffect(()=>{\n    contentApi?.getContentCategories().then(res=>{\n      const data = res?.data\n      if (res.success) {\n        setDataCategories(data?.items)\n      }\n    })\n  },[])\n\n  useEffect(() => {\n    if (currentPageList) {\n      let max = parsedPageLimit(total, rowPerPage)\n      setMaxPage(max)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [total, rowPerPage])\n  useEffect(()=>{\n    if (!keyWord && !category?.id && !type?.id) {\n      contentApi?.getContentList(\n        currentPage -1,\n        rowPerPage,\n        keyWord,\n        category?.id,\n        type?.id\n      ).then(\n        res => {\n          const data = res?.data\n          if (res?.success) {\n            setCurrentPageList(data?.items)\n            setTotal(data?.metadata?.total)\n          }\n        }\n      )\n    }else searchAndFilter()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    currentPage,\n    rowPerPage,\n    keyWord,\n    category?.id,\n    type?.id,\n  ])\n\n  useEffect(() => {\n    setData(content?.title)\n  }, [content?.title])\n\n\n  const searchAndFilter = () => {\n    contentApi.getContentList(\n      currentPage-1,\n      rowPerPage,\n      keyWord,\n      category?.id,\n      type?.id\n    ).then(res=>{\n      if (res.success){\n        const data = res?.data\n        setCurrentPageList(data?.items)\n        setTotal(data?.metadata?.total)\n      }\n    })\n  }\n\n\n\n  const handleChangeType = (item) => {\n    setType(item)\n  }\n  const handleChangeGenre = (item) => {\n    setCategory(item)\n  }\n  const handleChangeKeyword = (event) => {\n    setKeyWord(event.target.value);\n  }\n  const handleKeyPress = (event) => {\n    if (event.key === 'Enter') {\n      searchAndFilter();\n    }\n  }\n  const handleClose = () => {\n    setModal(false);\n    setData(content?.title)\n  }\n\n  const handleSelect = (data) => {\n    setModal(false);\n    setContent && setContent(data);\n    setValue && setValue(data?.name)\n  }\n\n  return (\n    <React.Fragment>\n      <CModal\n        closeOnBackdrop={false}\n        size={''}\n        show={modal}\n        onClose={handleClose}\n        centered={true}\n      >\n        <CModalHeader style={{ backgroundColor: '#646464' }}>\n          <div className=\"w-100 d-flex justify-content-between align-items-center\" style={{ color: \"#FFF\" }}>\n            <h3 className=\"mb-0\">Chọn nội dung</h3>\n            <CButton className='p-0 shadow-none' onClick={handleClose}>\n              <CIcon name=\"cil-x\" style={{ color: \"#FFF\" }}></CIcon>\n            </CButton>\n          </div>\n        </CModalHeader>\n        <CModalBody>\n          <div >\n            <div className=\"d-flex flex-row mb-2\">\n              <CDropdown className=\"m-1 btn-group\" style={{ width: '300px' }}>\n                <CDropdownToggle color=\"default\" className='border'>\n                  <span className=\"mr-2\" style={{ color: '#222' }}>{type === '' ? 'Loại nội dung' : type?.name}</span>\n                </CDropdownToggle>\n                <CDropdownMenu>\n                  {dataType && (dataType || []).map((item, index) => {\n                    return (\n                      <CDropdownItem key={index} onClick={() => handleChangeType(item)}>{item?.name}</CDropdownItem>\n                    )\n                  })\n                  }\n                </CDropdownMenu>\n              </CDropdown>\n              <CDropdown className=\"m-1 btn-group\" style={{ width: '200px' }}>\n                <CDropdownToggle color=\"default\" className='border'>\n                  <span className=\"mr-2\" style={{ color: '#222' }}>{category === '' ? 'Thể loại' : category?.name}</span>\n                </CDropdownToggle>\n                <CDropdownMenu>\n                  {dataCategories && (dataCategories || []).map((item, index) => {\n                    return (\n                      <CDropdownItem key={index} onClick={() => handleChangeGenre(item)}>{item?.name}</CDropdownItem>\n                    )\n                  })\n                  }\n                </CDropdownMenu>\n              </CDropdown>\n              <CInputGroup className=\"m-1\">\n                <CInput\n                  name='keyword'\n                  type=\"text\"\n                  value={keyWord}\n                  placeholder='Tìm phim / show / kênh'\n                  style={{ color: '#222' }}\n                  onChange={handleChangeKeyword}\n                  onKeyPress={handleKeyPress}\n                />\n                <CInputGroupAppend style={{ cursor: \"pointer\" }} onClick={searchAndFilter} >\n                  <CInputGroupText >\n                    <CIcon content={freeSet.cilSearch} />\n                  </CInputGroupText>\n                </CInputGroupAppend>\n              </CInputGroup>\n            </div>\n\n            <div>\n              {currentPageList && currentPageList.map((item, index) => {\n                return (\n                  <div className=\"m-1 mb-2 d-flex justify-content-between align-items-center\" key={index}>\n                    <strong>{item.name}</strong>\n                    <CButton\n                      className='shadow-none'\n                      name={item.title}\n                      color=\"success\"\n                      variant={data?.title === item.title ? \"\" : \"outline\"}\n                      onClick={()=>handleSelect(item)}>\n                      Chọn\n                    </CButton>\n                  </div>\n                )\n              })}\n              <div className=\"m-1 mt-4 d-flex justify-content-between align-items-center\">\n                <CDropdown className=\"btn-group\" style={{ width: '100px' }}>\n                  <CDropdownToggle color=\"default\" className='shadow-none row-page color-white'>\n                    <span className=\"mr-2\" style={{ color: '#222' }}>{rowPerPage + ' dòng'}</span>\n                  </CDropdownToggle>\n                  <CDropdownMenu>\n                    {rowPerPageList && (rowPerPageList || []).map((item, index) => {\n                      return (\n                        <CDropdownItem key={index} onClick={() => setRowPerPage(item?.value)}>{item?.name}</CDropdownItem>\n                      )\n                    })\n                    }\n                  </CDropdownMenu>\n                </CDropdown>\n                <CPagination\n                  nextButton={'Sau'}\n                  previousButton={'Trước'}\n                  activePage={currentPage}\n                  pages={maxPage}\n                  onActivePageChange={setCurrentPage}\n                />\n              </div>\n\n            </div>\n\n          </div>\n        </CModalBody>\n      </CModal>\n    </React.Fragment>\n\n  )\n}\n\n\nconst rowPerPageList = [\n  { id: 1, name: '5 dòng', value: 5 },\n  { id: 2, name: '10 dòng', value: 10 },\n  { id: 3, name: '20 dòng', value: 20 },\n\n]\n\nexport default PopupContent\n"]},"metadata":{},"sourceType":"module"}