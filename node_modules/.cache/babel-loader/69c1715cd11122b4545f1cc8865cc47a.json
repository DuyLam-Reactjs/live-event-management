{"ast":null,"code":"var _jsxFileName = \"/Users/admin/Desktop/SourceDevVieON/LiveEvent/src/views/LiveManagementEvent/ContentList/ContentList.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport TablesContentList from \"../../base/tables/TablesContentList\";\nimport { CInput, CInputGroup } from \"@coreui/react\";\nimport CIcon from \"@coreui/icons-react\";\nimport TypeContent from \"./TypeContent\";\nimport CategotyContent from \"./CategoryContent\";\nimport ListNameContentProvider from \"./ListNameContentProvider\";\nimport AdsGroupContent from \"./AdsGroupContent\";\nimport { freeSet } from \"@coreui/icons\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport contentApi from \"../../../apis/contentApi\";\nimport { getListAllInStreamAds } from \"../../../actions/inStreamAds\";\nimport TitleAds from \"../TitleAds/TitleAds\";\nimport { parsedPageLimit } from \"../../../helpers/common\";\nimport { useHistory, useLocation } from \"react-router\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst queryString = require('query-string');\n\nconst ContentList = () => {\n  _s();\n\n  var _dataListAds$LIST_ALL;\n\n  const dataListAds = useSelector(state => state.InStreamAds);\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const parsedID = queryString.parse(location.search);\n  const idProvider = parsedID === null || parsedID === void 0 ? void 0 : parsedID.id;\n  const listAdsGroups = dataListAds === null || dataListAds === void 0 ? void 0 : (_dataListAds$LIST_ALL = dataListAds.LIST_ALL_INSTREAM_ADS) === null || _dataListAds$LIST_ALL === void 0 ? void 0 : _dataListAds$LIST_ALL.items;\n  const [currentPageList, setCurrentPageList] = useState([]);\n  const [total, setTotal] = useState();\n  const [currentPage, setCurrentPage] = useState(1);\n  const [rowPerPage, setRowPerPage] = useState(10);\n  const [maxPage, setMaxPage] = useState(1);\n  const [keyWord, setKeyWord] = useState('');\n  const [category, setCategory] = useState('');\n  const [type, setType] = useState('');\n  const [idContentProvider, setIdContentProvider] = useState(idProvider || '');\n  const [idAdsGroup, setIdAdsGroup] = useState('');\n  const [currentPageProvider, setPageProvider] = useState(0);\n  const [dataContentList, setDataProvider] = useState([]);\n  const [metadataProvider, setMetadataProvider] = useState();\n  useEffect(() => {\n    async function getList() {\n      contentApi.getListContentProvider(10, currentPageProvider).then(res => {\n        const data = res === null || res === void 0 ? void 0 : res.data;\n\n        if (res === null || res === void 0 ? void 0 : res.success) {\n          setMetadataProvider(data === null || data === void 0 ? void 0 : data.metadata);\n          let dataList = [...dataContentList];\n          let newDataList = dataList.concat(data === null || data === void 0 ? void 0 : data.items);\n          setDataProvider(newDataList);\n        }\n      });\n    }\n\n    getList(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentPageProvider]);\n  useEffect(() => {\n    function watchScroll() {\n      window.addEventListener(\"scroll\", handleScroll);\n    }\n\n    watchScroll();\n    return () => {\n      window.removeEventListener(\"scroll\", handleScroll);\n    };\n  });\n\n  const handleScroll = () => {\n    const {\n      page,\n      limit,\n      total\n    } = metadataProvider || {};\n    let maxPage = parsedPageLimit(total, limit);\n    if ((page + 1) * limit >= total && page + 1 > maxPage) return;\n    setPageProvider((page || 0) + 1);\n  };\n\n  const [dataType, setDataType] = useState();\n  useEffect(() => {\n    contentApi === null || contentApi === void 0 ? void 0 : contentApi.getContentType().then(res => {\n      const data = res === null || res === void 0 ? void 0 : res.data;\n\n      if (res.success) {\n        setDataType(data === null || data === void 0 ? void 0 : data.items);\n      }\n    });\n  }, []);\n  const [dataCategories, setDataCategories] = useState();\n  useEffect(() => {\n    contentApi === null || contentApi === void 0 ? void 0 : contentApi.getContentCategories().then(res => {\n      const data = res === null || res === void 0 ? void 0 : res.data;\n\n      if (res.success) {\n        setDataCategories(data === null || data === void 0 ? void 0 : data.items);\n      }\n    });\n  }, []);\n  useEffect(() => {\n    if (currentPageList) {\n      let max = parsedPageLimit(total, rowPerPage);\n      setMaxPage(max);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [total, rowPerPage]);\n\n  const handleChangeType = async item => {\n    const type = item === null || item === void 0 ? void 0 : item.id;\n    await setType(type);\n    setCurrentPage(1);\n  };\n\n  const handleChangeCategory = item => {\n    const category = item === null || item === void 0 ? void 0 : item.id;\n    setCategory(category);\n    setCurrentPage(1);\n  };\n\n  const handleChangeListName = item => {\n    if ((item === null || item === void 0 ? void 0 : item.id) === 'all') {\n      history.push('/instream-ads/content-list');\n      setIdContentProvider('');\n    } else {\n      const idContentProviderItem = item === null || item === void 0 ? void 0 : item.id;\n      setIdContentProvider(idContentProviderItem);\n      setCurrentPage(1);\n\n      if (idContentProviderItem) {\n        getListAdsGroups(idContentProviderItem);\n      }\n    }\n  };\n\n  const getListAdsGroups = id => {\n    dispatch(getListAllInStreamAds(id));\n  };\n\n  const handleChangeAdsGroups = item => {\n    if ((item === null || item === void 0 ? void 0 : item.id) === 'all') {\n      history.push('/instream-ads/content-list');\n      setIdAdsGroup('');\n    } else {\n      const idAdsGroupsItem = item === null || item === void 0 ? void 0 : item.id;\n      setIdAdsGroup(idAdsGroupsItem);\n      setCurrentPage(1);\n    }\n  };\n\n  const handleChangeKeyword = e => {\n    var _e$target$value;\n\n    const value = (_e$target$value = e.target.value) === null || _e$target$value === void 0 ? void 0 : _e$target$value.toLowerCase();\n    setKeyWord(value);\n  };\n\n  const handleKeyPress = event => {\n    if (event.key === 'Enter') {\n      searchAndFilter();\n    }\n  };\n\n  const searchAndFilter = () => {\n    contentApi.getContentList(currentPage - 1, rowPerPage, keyWord, category, type, idContentProvider, idAdsGroup).then(res => {\n      if (res.success) {\n        var _data$metadata;\n\n        const data = res === null || res === void 0 ? void 0 : res.data;\n        setCurrentPageList(data === null || data === void 0 ? void 0 : data.items);\n        setTotal(data === null || data === void 0 ? void 0 : (_data$metadata = data.metadata) === null || _data$metadata === void 0 ? void 0 : _data$metadata.total);\n      }\n    });\n  };\n\n  useEffect(() => {\n    if (!category && !type && !idContentProvider && !idAdsGroup) {\n      contentApi === null || contentApi === void 0 ? void 0 : contentApi.getContentList(currentPage - 1, rowPerPage, keyWord, category, type, idContentProvider, idAdsGroup).then(res => {\n        const data = res === null || res === void 0 ? void 0 : res.data;\n\n        if (res === null || res === void 0 ? void 0 : res.success) {\n          var _data$metadata2;\n\n          setCurrentPageList(() => data === null || data === void 0 ? void 0 : data.items);\n          setTotal(data === null || data === void 0 ? void 0 : (_data$metadata2 = data.metadata) === null || _data$metadata2 === void 0 ? void 0 : _data$metadata2.total);\n        }\n      });\n    } else searchAndFilter(); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [currentPage, rowPerPage, category, type, idContentProvider, idAdsGroup]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(TitleAds, {\n      title: \"Content List\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'd-flex flex-row',\n      style: {\n        marginBottom: '1rem',\n        maxWidth: '100%'\n      },\n      children: [/*#__PURE__*/_jsxDEV(TypeContent, {\n        typeFilter: dataType,\n        handleChangeType: handleChangeType\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CategotyContent, {\n        categoryFilter: dataCategories,\n        handleChangeCategory: handleChangeCategory\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ListNameContentProvider, {\n        dataContentList: dataContentList,\n        handleChangeListName: handleChangeListName,\n        handleScroll: handleScroll,\n        parsedID: parsedID\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AdsGroupContent, {\n        listAdsGroup: listAdsGroups,\n        handleChangeAdsGroup: handleChangeAdsGroups\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pr-2 pl-1\",\n        children: /*#__PURE__*/_jsxDEV(CInputGroup, {\n          className: \"pt-4\",\n          style: {\n            marginTop: '0.64rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(CInput, {\n            className: \"input-search\",\n            name: \"keyword\",\n            type: \"text\",\n            placeholder: \"T\\xECm phim / show / k\\xEAnh\",\n            style: {\n              color: '#222'\n            },\n            onChange: handleChangeKeyword,\n            onKeyPress: handleKeyPress\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-square btn-default color-black btn-search\",\n            onClick: searchAndFilter,\n            children: /*#__PURE__*/_jsxDEV(CIcon, {\n              content: freeSet.cilSearch,\n              size: 'lg',\n              style: {\n                margin: 0\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(TablesContentList, {\n        currentPageList: currentPageList,\n        setRowPerPage: setRowPerPage,\n        setCurrentPage: setCurrentPage,\n        rowPerPage: rowPerPage,\n        currentPage: currentPage,\n        maxPage: maxPage,\n        setCurrentPageList: setCurrentPageList,\n        keyWord: keyWord,\n        category: category,\n        type: type,\n        idContentProvider: idContentProvider,\n        idAdsGroup: idAdsGroup\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 212,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ContentList, \"tBAs70p/MjTyZwVLQBI/DYY8ctI=\", false, function () {\n  return [useSelector, useHistory, useDispatch, useLocation];\n});\n\n_c = ContentList;\nexport default ContentList;\n\nvar _c;\n\n$RefreshReg$(_c, \"ContentList\");","map":{"version":3,"sources":["/Users/admin/Desktop/SourceDevVieON/LiveEvent/src/views/LiveManagementEvent/ContentList/ContentList.js"],"names":["React","useEffect","useState","TablesContentList","CInput","CInputGroup","CIcon","TypeContent","CategotyContent","ListNameContentProvider","AdsGroupContent","freeSet","useDispatch","useSelector","contentApi","getListAllInStreamAds","TitleAds","parsedPageLimit","useHistory","useLocation","queryString","require","ContentList","dataListAds","state","InStreamAds","history","dispatch","location","parsedID","parse","search","idProvider","id","listAdsGroups","LIST_ALL_INSTREAM_ADS","items","currentPageList","setCurrentPageList","total","setTotal","currentPage","setCurrentPage","rowPerPage","setRowPerPage","maxPage","setMaxPage","keyWord","setKeyWord","category","setCategory","type","setType","idContentProvider","setIdContentProvider","idAdsGroup","setIdAdsGroup","currentPageProvider","setPageProvider","dataContentList","setDataProvider","metadataProvider","setMetadataProvider","getList","getListContentProvider","then","res","data","success","metadata","dataList","newDataList","concat","watchScroll","window","addEventListener","handleScroll","removeEventListener","page","limit","dataType","setDataType","getContentType","dataCategories","setDataCategories","getContentCategories","max","handleChangeType","item","handleChangeCategory","handleChangeListName","push","idContentProviderItem","getListAdsGroups","handleChangeAdsGroups","idAdsGroupsItem","handleChangeKeyword","e","value","target","toLowerCase","handleKeyPress","event","key","searchAndFilter","getContentList","marginBottom","maxWidth","marginTop","color","cilSearch","margin"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,OAAOC,iBAAP,MAA8B,qCAA9B;AACA,SACEC,MADF,EACUC,WADV,QAEO,eAFP;AAGA,OAAOC,KAAP,MAAkB,qBAAlB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,OAAOC,uBAAP,MAAoC,2BAApC;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,SAAQC,OAAR,QAAsB,eAAtB;AACA,SAAQC,WAAR,EAAqBC,WAArB,QAAuC,aAAvC;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,SAAQC,qBAAR,QAAoC,8BAApC;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,SAAQC,eAAR,QAA8B,yBAA9B;AACA,SAAQC,UAAR,EAAoBC,WAApB,QAAsC,cAAtC;;;AAEA,MAAMC,WAAW,GAAGC,OAAO,CAAC,cAAD,CAA3B;;AAGA,MAAMC,WAAW,GAAG,MAAM;AAAA;;AAAA;;AAExB,QAAMC,WAAW,GAAGV,WAAW,CAACW,KAAK,IAAIA,KAAK,CAACC,WAAhB,CAA/B;AAEA,QAAMC,OAAO,GAAGR,UAAU,EAA1B;AACA,QAAMS,QAAQ,GAAGf,WAAW,EAA5B;AACA,QAAMgB,QAAQ,GAAGT,WAAW,EAA5B;AACA,QAAMU,QAAQ,GAAGT,WAAW,CAACU,KAAZ,CAAkBF,QAAQ,CAACG,MAA3B,CAAjB;AACA,QAAMC,UAAU,GAAGH,QAAH,aAAGA,QAAH,uBAAGA,QAAQ,CAAEI,EAA7B;AACA,QAAMC,aAAa,GAAGX,WAAH,aAAGA,WAAH,gDAAGA,WAAW,CAAEY,qBAAhB,0DAAG,sBAAoCC,KAA1D;AAEA,QAAM,CAACC,eAAD,EAAkBC,kBAAlB,IAAwCpC,QAAQ,CAAC,EAAD,CAAtD;AACA,QAAM,CAACqC,KAAD,EAAQC,QAAR,IAAoBtC,QAAQ,EAAlC;AACA,QAAM,CAACuC,WAAD,EAAcC,cAAd,IAAgCxC,QAAQ,CAAC,CAAD,CAA9C;AACA,QAAM,CAACyC,UAAD,EAAaC,aAAb,IAA8B1C,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAAC2C,OAAD,EAAUC,UAAV,IAAwB5C,QAAQ,CAAC,CAAD,CAAtC;AACA,QAAM,CAAC6C,OAAD,EAAUC,UAAV,IAAwB9C,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAAC+C,QAAD,EAAWC,WAAX,IAA0BhD,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACiD,IAAD,EAAOC,OAAP,IAAkBlD,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACmD,iBAAD,EAAoBC,oBAApB,IAA4CpD,QAAQ,CAAC8B,UAAU,IAAI,EAAf,CAA1D;AACA,QAAM,CAACuB,UAAD,EAAaC,aAAb,IAA8BtD,QAAQ,CAAC,EAAD,CAA5C;AAGA,QAAM,CAACuD,mBAAD,EAAsBC,eAAtB,IAAyCxD,QAAQ,CAAC,CAAD,CAAvD;AACA,QAAM,CAACyD,eAAD,EAAkBC,eAAlB,IAAqC1D,QAAQ,CAAC,EAAD,CAAnD;AACA,QAAM,CAAC2D,gBAAD,EAAmBC,mBAAnB,IAA0C5D,QAAQ,EAAxD;AAEAD,EAAAA,SAAS,CAAE,MAAI;AACb,mBAAe8D,OAAf,GAA0B;AACxBjD,MAAAA,UAAU,CAACkD,sBAAX,CAAkC,EAAlC,EAAsCP,mBAAtC,EAA2DQ,IAA3D,CAAgEC,GAAG,IAAE;AACnE,cAAMC,IAAI,GAAGD,GAAH,aAAGA,GAAH,uBAAGA,GAAG,CAAEC,IAAlB;;AACA,YAAID,GAAJ,aAAIA,GAAJ,uBAAIA,GAAG,CAAEE,OAAT,EAAkB;AAChBN,UAAAA,mBAAmB,CAACK,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAEE,QAAP,CAAnB;AACA,cAAIC,QAAQ,GAAG,CAAC,GAAGX,eAAJ,CAAf;AACA,cAAIY,WAAW,GAAGD,QAAQ,CAACE,MAAT,CAAgBL,IAAhB,aAAgBA,IAAhB,uBAAgBA,IAAI,CAAE/B,KAAtB,CAAlB;AACAwB,UAAAA,eAAe,CAACW,WAAD,CAAf;AACD;AACF,OARD;AASD;;AACDR,IAAAA,OAAO,GAZM,CAab;AACD,GAdQ,EAcP,CAACN,mBAAD,CAdO,CAAT;AAiBAxD,EAAAA,SAAS,CAAC,MAAM;AACd,aAASwE,WAAT,GAAuB;AACrBC,MAAAA,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkCC,YAAlC;AACD;;AACDH,IAAAA,WAAW;AACX,WAAO,MAAM;AACXC,MAAAA,MAAM,CAACG,mBAAP,CAA2B,QAA3B,EAAqCD,YAArC;AACD,KAFD;AAGD,GARQ,CAAT;;AAUA,QAAMA,YAAY,GAAG,MAAM;AACzB,UAAM;AAAEE,MAAAA,IAAF;AAAQC,MAAAA,KAAR;AAAexC,MAAAA;AAAf,QAAyBsB,gBAAgB,IAAI,EAAnD;AACA,QAAIhB,OAAO,GAAG5B,eAAe,CAACsB,KAAD,EAAQwC,KAAR,CAA7B;AAEA,QAAI,CAACD,IAAI,GAAG,CAAR,IAAaC,KAAb,IAAsBxC,KAAtB,IAAgCuC,IAAI,GAAG,CAAR,GAAajC,OAAhD,EAAyD;AACzDa,IAAAA,eAAe,CAAC,CAACoB,IAAI,IAAI,CAAT,IAAc,CAAf,CAAf;AACD,GAND;;AASA,QAAM,CAACE,QAAD,EAAWC,WAAX,IAA0B/E,QAAQ,EAAxC;AACAD,EAAAA,SAAS,CAAC,MAAI;AACZa,IAAAA,UAAU,SAAV,IAAAA,UAAU,WAAV,YAAAA,UAAU,CAAEoE,cAAZ,GAA6BjB,IAA7B,CAAkCC,GAAG,IAAE;AACrC,YAAMC,IAAI,GAAGD,GAAH,aAAGA,GAAH,uBAAGA,GAAG,CAAEC,IAAlB;;AACA,UAAID,GAAG,CAACE,OAAR,EAAiB;AACfa,QAAAA,WAAW,CAACd,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAE/B,KAAP,CAAX;AACD;AACF,KALD;AAMD,GAPQ,EAOP,EAPO,CAAT;AAQA,QAAM,CAAC+C,cAAD,EAAiBC,iBAAjB,IAAsClF,QAAQ,EAApD;AACAD,EAAAA,SAAS,CAAC,MAAI;AACZa,IAAAA,UAAU,SAAV,IAAAA,UAAU,WAAV,YAAAA,UAAU,CAAEuE,oBAAZ,GAAmCpB,IAAnC,CAAwCC,GAAG,IAAE;AAC3C,YAAMC,IAAI,GAAGD,GAAH,aAAGA,GAAH,uBAAGA,GAAG,CAAEC,IAAlB;;AACA,UAAID,GAAG,CAACE,OAAR,EAAiB;AACfgB,QAAAA,iBAAiB,CAACjB,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAE/B,KAAP,CAAjB;AACD;AACF,KALD;AAMD,GAPQ,EAOP,EAPO,CAAT;AASAnC,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIoC,eAAJ,EAAqB;AACnB,UAAIiD,GAAG,GAAGrE,eAAe,CAACsB,KAAD,EAAQI,UAAR,CAAzB;AACAG,MAAAA,UAAU,CAACwC,GAAD,CAAV;AACD,KAJa,CAKd;;AACD,GANQ,EAMN,CAAC/C,KAAD,EAAQI,UAAR,CANM,CAAT;;AAUA,QAAM4C,gBAAgB,GAAG,MAAOC,IAAP,IAAgB;AACvC,UAAMrC,IAAI,GAAGqC,IAAH,aAAGA,IAAH,uBAAGA,IAAI,CAAEvD,EAAnB;AACA,UAAMmB,OAAO,CAAED,IAAF,CAAb;AACAT,IAAAA,cAAc,CAAC,CAAD,CAAd;AACD,GAJD;;AAKA,QAAM+C,oBAAoB,GAAID,IAAD,IAAS;AACpC,UAAMvC,QAAQ,GAAGuC,IAAH,aAAGA,IAAH,uBAAGA,IAAI,CAAEvD,EAAvB;AACAiB,IAAAA,WAAW,CAAED,QAAF,CAAX;AACAP,IAAAA,cAAc,CAAC,CAAD,CAAd;AACD,GAJD;;AAKA,QAAMgD,oBAAoB,GAAIF,IAAD,IAAU;AACrC,QAAI,CAAAA,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEvD,EAAN,MAAa,KAAjB,EAAuB;AACrBP,MAAAA,OAAO,CAACiE,IAAR,CAAa,4BAAb;AACArC,MAAAA,oBAAoB,CAAC,EAAD,CAApB;AACD,KAHD,MAGM;AACJ,YAAMsC,qBAAqB,GAAGJ,IAAH,aAAGA,IAAH,uBAAGA,IAAI,CAAEvD,EAApC;AACAqB,MAAAA,oBAAoB,CAACsC,qBAAD,CAApB;AACAlD,MAAAA,cAAc,CAAC,CAAD,CAAd;;AACA,UAAIkD,qBAAJ,EAA0B;AACxBC,QAAAA,gBAAgB,CAACD,qBAAD,CAAhB;AACD;AACF;AACF,GAZD;;AAcA,QAAMC,gBAAgB,GAAI5D,EAAD,IAAQ;AAC/BN,IAAAA,QAAQ,CAACZ,qBAAqB,CAACkB,EAAD,CAAtB,CAAR;AACD,GAFD;;AAIA,QAAM6D,qBAAqB,GAAIN,IAAD,IAAU;AACtC,QAAI,CAAAA,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEvD,EAAN,MAAa,KAAjB,EAAuB;AACrBP,MAAAA,OAAO,CAACiE,IAAR,CAAa,4BAAb;AACAnC,MAAAA,aAAa,CAAC,EAAD,CAAb;AACD,KAHD,MAGM;AACJ,YAAMuC,eAAe,GAAGP,IAAH,aAAGA,IAAH,uBAAGA,IAAI,CAAEvD,EAA9B;AACAuB,MAAAA,aAAa,CAACuC,eAAD,CAAb;AACArD,MAAAA,cAAc,CAAC,CAAD,CAAd;AACD;AACF,GATD;;AAUA,QAAMsD,mBAAmB,GAAIC,CAAD,IAAO;AAAA;;AACjC,UAAMC,KAAK,sBAAGD,CAAC,CAACE,MAAF,CAASD,KAAZ,oDAAG,gBAAgBE,WAAhB,EAAd;AACApD,IAAAA,UAAU,CAACkD,KAAD,CAAV;AACD,GAHD;;AAKA,QAAMG,cAAc,GAAIC,KAAD,IAAW;AAChC,QAAIA,KAAK,CAACC,GAAN,KAAc,OAAlB,EAA2B;AACzBC,MAAAA,eAAe;AAChB;AACF,GAJD;;AAKA,QAAMA,eAAe,GAAG,MAAM;AAC5B1F,IAAAA,UAAU,CAAC2F,cAAX,CACEhE,WAAW,GAAC,CADd,EAEEE,UAFF,EAGEI,OAHF,EAIEE,QAJF,EAKEE,IALF,EAMEE,iBANF,EAOEE,UAPF,EAQEU,IARF,CAQOC,GAAG,IAAE;AACV,UAAIA,GAAG,CAACE,OAAR,EAAgB;AAAA;;AACd,cAAMD,IAAI,GAAGD,GAAH,aAAGA,GAAH,uBAAGA,GAAG,CAAEC,IAAlB;AACA7B,QAAAA,kBAAkB,CAAC6B,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAE/B,KAAP,CAAlB;AACAI,QAAAA,QAAQ,CAAC2B,IAAD,aAACA,IAAD,yCAACA,IAAI,CAAEE,QAAP,mDAAC,eAAgB9B,KAAjB,CAAR;AACD;AACF,KAdD;AAeD,GAhBD;;AAkBAtC,EAAAA,SAAS,CAAC,MAAI;AAEZ,QAAI,CAACgD,QAAD,IAAa,CAACE,IAAd,IAAsB,CAACE,iBAAvB,IAA4C,CAACE,UAAjD,EAA6D;AAC3DzC,MAAAA,UAAU,SAAV,IAAAA,UAAU,WAAV,YAAAA,UAAU,CAAE2F,cAAZ,CACEhE,WAAW,GAAE,CADf,EAEEE,UAFF,EAGEI,OAHF,EAIEE,QAJF,EAKEE,IALF,EAMEE,iBANF,EAOEE,UAPF,EAQEU,IARF,CASEC,GAAG,IAAI;AACL,cAAMC,IAAI,GAAGD,GAAH,aAAGA,GAAH,uBAAGA,GAAG,CAAEC,IAAlB;;AACA,YAAID,GAAJ,aAAIA,GAAJ,uBAAIA,GAAG,CAAEE,OAAT,EAAkB;AAAA;;AAChB9B,UAAAA,kBAAkB,CAAC,MAAM6B,IAAN,aAAMA,IAAN,uBAAMA,IAAI,CAAE/B,KAAb,CAAlB;AACAI,UAAAA,QAAQ,CAAC2B,IAAD,aAACA,IAAD,0CAACA,IAAI,CAAEE,QAAP,oDAAC,gBAAgB9B,KAAjB,CAAR;AACD;AACF,OAfH;AAiBD,KAlBD,MAkBMiE,eAAe,GApBT,CAqBZ;;AACD,GAtBQ,EAsBN,CACD/D,WADC,EAEDE,UAFC,EAGDM,QAHC,EAIDE,IAJC,EAKDE,iBALC,EAMDE,UANC,CAtBM,CAAT;AA+BA,sBACE;AAAA,4BACE,QAAC,QAAD;AAAU,MAAA,KAAK,EAAE;AAAjB;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAK,MAAA,SAAS,EAAE,iBAAhB;AAAmC,MAAA,KAAK,EAAE;AAACmD,QAAAA,YAAY,EAAE,MAAf;AAAuBC,QAAAA,QAAQ,EAAE;AAAjC,OAA1C;AAAA,8BACE,QAAC,WAAD;AACE,QAAA,UAAU,EAAE3B,QADd;AAEE,QAAA,gBAAgB,EAAEO;AAFpB;AAAA;AAAA;AAAA;AAAA,cADF,eAKE,QAAC,eAAD;AACE,QAAA,cAAc,EAAEJ,cADlB;AAEE,QAAA,oBAAoB,EAAEM;AAFxB;AAAA;AAAA;AAAA;AAAA,cALF,eASE,QAAC,uBAAD;AACE,QAAA,eAAe,EAAE9B,eADnB;AAEE,QAAA,oBAAoB,EAAE+B,oBAFxB;AAGE,QAAA,YAAY,EAAEd,YAHhB;AAIE,QAAA,QAAQ,EAAE/C;AAJZ;AAAA;AAAA;AAAA;AAAA,cATF,eAeE,QAAC,eAAD;AACE,QAAA,YAAY,EAAEK,aADhB;AAEE,QAAA,oBAAoB,EAAE4D;AAFxB;AAAA;AAAA;AAAA;AAAA,cAfF,eAmBE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA,+BACI,QAAC,WAAD;AAAa,UAAA,SAAS,EAAC,MAAvB;AAA8B,UAAA,KAAK,EAAE;AAACc,YAAAA,SAAS,EAAE;AAAZ,WAArC;AAAA,kCACE,QAAC,MAAD;AACE,YAAA,SAAS,EAAC,cADZ;AAEE,YAAA,IAAI,EAAC,SAFP;AAGE,YAAA,IAAI,EAAC,MAHP;AAIE,YAAA,WAAW,EAAC,8BAJd;AAKE,YAAA,KAAK,EAAE;AAAEC,cAAAA,KAAK,EAAE;AAAT,aALT;AAME,YAAA,QAAQ,EAAEb,mBANZ;AAOE,YAAA,UAAU,EAAEK;AAPd;AAAA;AAAA;AAAA;AAAA,kBADF,eAUE;AAAQ,YAAA,SAAS,EAAC,mDAAlB;AACQ,YAAA,OAAO,EAAEG,eADjB;AAAA,mCAEE,QAAC,KAAD;AAAO,cAAA,OAAO,EAAE7F,OAAO,CAACmG,SAAxB;AAAmC,cAAA,IAAI,EAAE,IAAzC;AAA+C,cAAA,KAAK,EAAE;AAACC,gBAAAA,MAAM,EAAE;AAAT;AAAtD;AAAA;AAAA;AAAA;AAAA;AAFF;AAAA;AAAA;AAAA;AAAA,kBAVF;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAnBF;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF,eAuCE;AAAA,6BACE,QAAC,iBAAD;AACE,QAAA,eAAe,EAAE1E,eADnB;AAEE,QAAA,aAAa,EAAEO,aAFjB;AAGE,QAAA,cAAc,EAAEF,cAHlB;AAIE,QAAA,UAAU,EAAEC,UAJd;AAKE,QAAA,WAAW,EAAEF,WALf;AAME,QAAA,OAAO,EAAEI,OANX;AAOE,QAAA,kBAAkB,EAAEP,kBAPtB;AAQE,QAAA,OAAO,EAAES,OARX;AASE,QAAA,QAAQ,EAAEE,QATZ;AAUE,QAAA,IAAI,EAAEE,IAVR;AAWE,QAAA,iBAAiB,EAAEE,iBAXrB;AAYE,QAAA,UAAU,EAAEE;AAZd;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAvCF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AA0DD,CAvPD;;GAAMjC,W;UAEgBT,W,EAEJK,U,EACCN,W,EACAO,W;;;KANbG,W;AA0PN,eAAeA,WAAf","sourcesContent":["import React, {useEffect, useState} from 'react'\nimport TablesContentList from \"../../base/tables/TablesContentList\";\nimport {\n  CInput, CInputGroup,\n} from \"@coreui/react\";\nimport CIcon from \"@coreui/icons-react\";\nimport TypeContent from \"./TypeContent\";\nimport CategotyContent from \"./CategoryContent\";\nimport ListNameContentProvider from \"./ListNameContentProvider\";\nimport AdsGroupContent from \"./AdsGroupContent\";\nimport {freeSet} from \"@coreui/icons\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport contentApi from \"../../../apis/contentApi\";\nimport {getListAllInStreamAds} from \"../../../actions/inStreamAds\";\nimport TitleAds from \"../TitleAds/TitleAds\";\nimport {parsedPageLimit} from \"../../../helpers/common\";\nimport {useHistory, useLocation} from \"react-router\";\n\nconst queryString = require('query-string');\n\n\nconst ContentList = () => {\n\n  const dataListAds = useSelector(state => state.InStreamAds)\n\n  const history = useHistory()\n  const dispatch = useDispatch()\n  const location = useLocation()\n  const parsedID = queryString.parse(location.search)\n  const idProvider = parsedID?.id\n  const listAdsGroups = dataListAds?.LIST_ALL_INSTREAM_ADS?.items\n\n  const [currentPageList, setCurrentPageList] = useState([])\n  const [total, setTotal] = useState()\n  const [currentPage, setCurrentPage] = useState(1);\n  const [rowPerPage, setRowPerPage] = useState(10);\n  const [maxPage, setMaxPage] = useState(1);\n  const [keyWord, setKeyWord] = useState('')\n  const [category, setCategory] = useState('')\n  const [type, setType] = useState('')\n  const [idContentProvider, setIdContentProvider] = useState(idProvider || '')\n  const [idAdsGroup, setIdAdsGroup] = useState('')\n\n\n  const [currentPageProvider, setPageProvider] = useState(0)\n  const [dataContentList, setDataProvider] = useState([])\n  const [metadataProvider, setMetadataProvider] = useState()\n\n  useEffect( ()=>{\n    async function getList () {\n      contentApi.getListContentProvider(10, currentPageProvider).then(res=>{\n        const data = res?.data\n        if (res?.success) {\n          setMetadataProvider(data?.metadata)\n          let dataList = [...dataContentList]\n          let newDataList = dataList.concat(data?.items)\n          setDataProvider(newDataList)\n        }\n      })\n    }\n    getList()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  },[currentPageProvider])\n\n\n  useEffect(() => {\n    function watchScroll() {\n      window.addEventListener(\"scroll\", handleScroll);\n    }\n    watchScroll()\n    return () => {\n      window.removeEventListener(\"scroll\", handleScroll);\n    }\n  })\n\n  const handleScroll = () => {\n    const { page, limit, total } = metadataProvider || {}\n    let maxPage = parsedPageLimit(total, limit)\n\n    if ((page + 1) * limit >= total && (page + 1) > maxPage) return\n    setPageProvider((page || 0) + 1 )\n  }\n\n\n  const [dataType, setDataType] = useState()\n  useEffect(()=>{\n    contentApi?.getContentType().then(res=>{\n      const data = res?.data\n      if (res.success) {\n        setDataType(data?.items)\n      }\n    })\n  },[])\n  const [dataCategories, setDataCategories] = useState()\n  useEffect(()=>{\n    contentApi?.getContentCategories().then(res=>{\n      const data = res?.data\n      if (res.success) {\n        setDataCategories(data?.items)\n      }\n    })\n  },[])\n\n  useEffect(() => {\n    if (currentPageList) {\n      let max = parsedPageLimit(total, rowPerPage)\n      setMaxPage(max)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [total, rowPerPage])\n\n\n\n  const handleChangeType = async (item) => {\n    const type = item?.id\n    await setType( type)\n    setCurrentPage(1)\n  }\n  const handleChangeCategory = (item) =>{\n    const category = item?.id\n    setCategory( category)\n    setCurrentPage(1)\n  }\n  const handleChangeListName = (item) => {\n    if (item?.id === 'all'){\n      history.push('/instream-ads/content-list')\n      setIdContentProvider('')\n    }else {\n      const idContentProviderItem = item?.id\n      setIdContentProvider(idContentProviderItem)\n      setCurrentPage(1)\n      if (idContentProviderItem){\n        getListAdsGroups(idContentProviderItem)\n      }\n    }\n  }\n\n  const getListAdsGroups = (id) => {\n    dispatch(getListAllInStreamAds(id))\n  }\n\n  const handleChangeAdsGroups = (item) => {\n    if (item?.id === 'all'){\n      history.push('/instream-ads/content-list')\n      setIdAdsGroup('')\n    }else {\n      const idAdsGroupsItem = item?.id\n      setIdAdsGroup(idAdsGroupsItem)\n      setCurrentPage(1)\n    }\n  }\n  const handleChangeKeyword = (e) => {\n    const value = e.target.value?.toLowerCase()\n    setKeyWord(value)\n  }\n\n  const handleKeyPress = (event) => {\n    if (event.key === 'Enter') {\n      searchAndFilter();\n    }\n  }\n  const searchAndFilter = () => {\n    contentApi.getContentList(\n      currentPage-1,\n      rowPerPage,\n      keyWord,\n      category,\n      type,\n      idContentProvider,\n      idAdsGroup,\n    ).then(res=>{\n      if (res.success){\n        const data = res?.data\n        setCurrentPageList(data?.items)\n        setTotal(data?.metadata?.total)\n      }\n    })\n  }\n\n  useEffect(()=>{\n\n    if (!category && !type && !idContentProvider && !idAdsGroup) {\n      contentApi?.getContentList(\n        currentPage -1,\n        rowPerPage,\n        keyWord,\n        category,\n        type,\n        idContentProvider,\n        idAdsGroup,\n      ).then(\n        res => {\n          const data = res?.data\n          if (res?.success) {\n            setCurrentPageList(() => data?.items)\n            setTotal(data?.metadata?.total)\n          }\n        }\n      )\n    }else searchAndFilter()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    currentPage,\n    rowPerPage,\n    category,\n    type,\n    idContentProvider,\n    idAdsGroup,\n  ])\n\n  return (\n    <div>\n      <TitleAds title={\"Content List\"}/>\n      <div className={'d-flex flex-row'} style={{marginBottom: '1rem', maxWidth: '100%'}}>\n        <TypeContent\n          typeFilter={dataType}\n          handleChangeType={handleChangeType}\n        />\n        <CategotyContent\n          categoryFilter={dataCategories}\n          handleChangeCategory={handleChangeCategory}\n        />\n        <ListNameContentProvider\n          dataContentList={dataContentList}\n          handleChangeListName={handleChangeListName}\n          handleScroll={handleScroll}\n          parsedID={parsedID}\n        />\n        <AdsGroupContent\n          listAdsGroup={listAdsGroups}\n          handleChangeAdsGroup={handleChangeAdsGroups}\n        />\n        <div className=\"pr-2 pl-1\">\n            <CInputGroup className=\"pt-4\" style={{marginTop: '0.64rem'}}>\n              <CInput\n                className=\"input-search\"\n                name='keyword'\n                type=\"text\"\n                placeholder='Tìm phim / show / kênh'\n                style={{ color: '#222'}}\n                onChange={handleChangeKeyword}\n                onKeyPress={handleKeyPress}\n              />\n              <button className=\"btn btn-square btn-default color-black btn-search\"\n                      onClick={searchAndFilter}>\n                <CIcon content={freeSet.cilSearch} size={'lg'} style={{margin: 0}} />\n              </button>\n            </CInputGroup>\n        </div>\n      </div>\n      <div>\n        <TablesContentList\n          currentPageList={currentPageList }\n          setRowPerPage={setRowPerPage}\n          setCurrentPage={setCurrentPage}\n          rowPerPage={rowPerPage}\n          currentPage={currentPage}\n          maxPage={maxPage}\n          setCurrentPageList={setCurrentPageList}\n          keyWord={keyWord}\n          category={category}\n          type={type}\n          idContentProvider={idContentProvider}\n          idAdsGroup={idAdsGroup}\n        />\n      </div>\n    </div>\n  )\n}\n\n\nexport default ContentList\n"]},"metadata":{},"sourceType":"module"}