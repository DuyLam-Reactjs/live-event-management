{"ast":null,"code":"import _slicedToArray from\"/Users/admin/Desktop/SourceDevVieON/LiveEvent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{CBadge,CButton,CCard,CCardBody,CCol,CDataTable,CDropdown,CDropdownItem,CDropdownMenu,CDropdownToggle,CImg,CInput,CInputGroup,CLink,CPagination,CRow,CSwitch}from'@coreui/react';import CIcon from\"@coreui/icons-react\";import{useHistory}from'react-router-dom';import{parsedTimeCreate,parsedPageLimit,handleLocalStorage}from\"../../../helpers/common\";import{freeSet}from\"@coreui/icons\";import contentApi from\"../../../apis/contentApi\";import TitleAds from\"../../instream-ads/TitleAds/TitleAds\";import ConfigImage from\"../../../config/ConfigImage\";import LocalStorage from\"../../../config/LocalStorage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var getBadge=function getBadge(status){switch(status){case'Active':return'white';default:return'white';}};var fields=['Tên Content Provider','Trạng Thái','Số Nội Dung','Ngày Tạo','Quản lý'];var TablesContentProviderList=function TablesContentProviderList(){var history=useHistory();var _useState=useState(1),_useState2=_slicedToArray(_useState,2),currentPage=_useState2[0],setCurrentPage=_useState2[1];var _useState3=useState(10),_useState4=_slicedToArray(_useState3,2),rowPerPage=_useState4[0],setRowPerPage=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),maxPage=_useState6[0],setMaxPage=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),total=_useState8[0],setTotal=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),currentPageList=_useState10[0],setCurrentPageList=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),valueKeyword=_useState12[0],setKeyword=_useState12[1];useEffect(function(){if(!valueKeyword)contentApi===null||contentApi===void 0?void 0:contentApi.getListContentProvider(rowPerPage,currentPage-1).then(function(res){var data=res===null||res===void 0?void 0:res.data;var _ref=data||{},items=_ref.items,metadata=_ref.metadata;if(res===null||res===void 0?void 0:res.success){setCurrentPageList(items);setTotal(metadata===null||metadata===void 0?void 0:metadata.total);}});// eslint-disable-next-line react-hooks/exhaustive-deps\n},[rowPerPage,currentPage]);useEffect(function(){if(currentPageList){var max=parsedPageLimit(total,rowPerPage);setMaxPage(max);}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[total,rowPerPage]);var handleChange=function handleChange(e){var value=e.target.value.toLowerCase();setKeyword(value);};var onClickSearch=function onClickSearch(){contentApi.getListContentProvider(rowPerPage,currentPage-1,valueKeyword.trim()).then(function(res){if(res.success){var _data$metadata;var data=res===null||res===void 0?void 0:res.data;setCurrentPageList(data===null||data===void 0?void 0:data.items);setTotal(data===null||data===void 0?void 0:(_data$metadata=data.metadata)===null||_data$metadata===void 0?void 0:_data$metadata.total);setCurrentPage(1);}});};var onChangePage=function onChangePage(item){setRowPerPage(item===null||item===void 0?void 0:item.value);};var handleKeyPress=function handleKeyPress(event){if(event.key==='Enter'){onClickSearch();}};var onAddContentProvider=function onAddContentProvider(){history.push('/instream-ads/content-provider-list/create-content-provider');};var onEditContentItem=function onEditContentItem(item){history.push('/instream-ads/content-provider-list/edit-content-provider?id='+(item===null||item===void 0?void 0:item.id));};var handleContent=function handleContent(item){history.push('/instream-ads/content-list?id='+(item===null||item===void 0?void 0:item.id));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TitleAds,{title:\"Content Provider List\"}),/*#__PURE__*/_jsxs(CRow,{className:'row mx-0',children:[/*#__PURE__*/_jsx(CCol,{className:\"col-sm-6 form-inline p-0 c-datatable-filter\",children:/*#__PURE__*/_jsxs(CInputGroup,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(CInput,{className:\"input-search\",type:\"text\",placeholder:\"T\\xECm Content Provider\",autoComplete:\"search\",onChange:handleChange,value:valueKeyword,onKeyPress:handleKeyPress}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-square btn-default color-black btn-search\",onClick:onClickSearch,children:/*#__PURE__*/_jsx(CIcon,{content:freeSet.cilSearch,size:'lg',style:{margin:0}})})]})}),/*#__PURE__*/_jsx(CCol,{className:\"col-sm-6 p-0 \",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-inline justify-content-sm-end c-datatable-items-per-page\",children:/*#__PURE__*/_jsx(CLink,{to:\"/instream-ads/content-provider-list/create-content-provider\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success mb-3\",onClick:onAddContentProvider,children:\"Th\\xEAm Content Provider\"})})})})]}),/*#__PURE__*/_jsx(CRow,{className:'justify-content-between',children:/*#__PURE__*/_jsx(CCol,{children:/*#__PURE__*/_jsx(CCard,{children:/*#__PURE__*/_jsx(CCardBody,{children:/*#__PURE__*/_jsx(CDataTable,{items:currentPageList,fields:fields,itemsPerPage:10,scopedSlots:{'Tên Content Provider':function TênContentProvider(item){return/*#__PURE__*/_jsx(\"td\",{className:\"text-name-provider\",title:item===null||item===void 0?void 0:item.name,children:/*#__PURE__*/_jsx(\"strong\",{children:item===null||item===void 0?void 0:item.name})});},'Trạng Thái':function TrạngThái(item){return/*#__PURE__*/_jsx(\"td\",{style:{verticalAlign:\"middle\"},children:/*#__PURE__*/_jsx(CSwitch,{className:'mx-1',color:'success',labelOn:'ON',labelOff:'OFF',checked:(item===null||item===void 0?void 0:item.status)===1?true:false,readOnly:true})});},'Số Nội Dung':function SốNộiDung(item){return/*#__PURE__*/_jsx(\"td\",{style:{verticalAlign:\"middle\"},children:(item===null||item===void 0?void 0:item.total_content)>0&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(CLink,{className:\"clink\",onClick:function onClick(){return handleContent(item);},children:item===null||item===void 0?void 0:item.total_content})})});},'Ngày Tạo':function NgàyTạo(item){return/*#__PURE__*/_jsx(\"td\",{style:{verticalAlign:\"middle\"},children:/*#__PURE__*/_jsx(\"p\",{style:{marginBottom:\"0px\"},children:parsedTimeCreate(item===null||item===void 0?void 0:item.created_at)})});},'Quản lý':function QuảnLý(item){return/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(CBadge,{color:getBadge(item.status),children:/*#__PURE__*/_jsxs(CButton,{block:true,color:\"info\",onClick:function onClick(){return onEditContentItem(item);},children:[/*#__PURE__*/_jsx(CImg,{src:ConfigImage.edit,alt:\"edit\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"ml-1\",children:\"Ch\\u1EC9nh s\\u1EEDa\"})]})})});}}})})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"m-1 d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(CDropdown,{className:\"btn-group\",style:{width:'100px'},children:[/*#__PURE__*/_jsx(CDropdownToggle,{color:\"default\",className:\"shadow-none mb-2 row-page color-white\",children:/*#__PURE__*/_jsx(\"span\",{className:\"mr-2\",style:{color:'#222'},children:rowPerPage+' dòng'})}),/*#__PURE__*/_jsx(CDropdownMenu,{children:rowPerPageList&&(rowPerPageList||[]).map(function(item,index){return/*#__PURE__*/_jsx(CDropdownItem,{onClick:function onClick(){return onChangePage(item);},children:item===null||item===void 0?void 0:item.name},index);})})]}),/*#__PURE__*/_jsx(CPagination,{nextButton:'Sau',previousButton:'Trước',activePage:currentPage,pages:maxPage,onActivePageChange:setCurrentPage})]})]});};var rowPerPageList=[{id:1,name:'5 dòng',value:5},{id:2,name:'10 dòng',value:10},{id:3,name:'20 dòng',value:20}];export default TablesContentProviderList;","map":{"version":3,"sources":["/Users/admin/Desktop/SourceDevVieON/LiveEvent/src/views/base/tables/TablesContentProviderList.js"],"names":["React","useEffect","useState","CBadge","CButton","CCard","CCardBody","CCol","CDataTable","CDropdown","CDropdownItem","CDropdownMenu","CDropdownToggle","CImg","CInput","CInputGroup","CLink","CPagination","CRow","CSwitch","CIcon","useHistory","parsedTimeCreate","parsedPageLimit","handleLocalStorage","freeSet","contentApi","TitleAds","ConfigImage","LocalStorage","getBadge","status","fields","TablesContentProviderList","history","currentPage","setCurrentPage","rowPerPage","setRowPerPage","maxPage","setMaxPage","total","setTotal","currentPageList","setCurrentPageList","valueKeyword","setKeyword","getListContentProvider","then","res","data","items","metadata","success","max","handleChange","e","value","target","toLowerCase","onClickSearch","trim","onChangePage","item","handleKeyPress","event","key","onAddContentProvider","push","onEditContentItem","id","handleContent","cilSearch","margin","name","verticalAlign","total_content","marginBottom","created_at","edit","width","color","rowPerPageList","map","index"],"mappings":"oKAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,OACEC,MADF,CACUC,OADV,CAEEC,KAFF,CAGEC,SAHF,CAIEC,IAJF,CAKEC,UALF,CAKcC,SALd,CAKyBC,aALzB,CAKwCC,aALxC,CAKuDC,eALvD,CAKwEC,IALxE,CAK8EC,MAL9E,CAKsFC,WALtF,CAMEC,KANF,CAMSC,WANT,CAOEC,IAPF,CAOQC,OAPR,KAQO,eARP,CAUA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,CACA,OAAQC,UAAR,KAAyB,kBAAzB,CACA,OAAQC,gBAAR,CAA0BC,eAA1B,CAA2CC,kBAA3C,KAAoE,yBAApE,CACA,OAAQC,OAAR,KAAsB,eAAtB,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,MAAOC,CAAAA,QAAP,KAAqB,sCAArB,CACA,MAAOC,CAAAA,WAAP,KAAwB,6BAAxB,CACA,MAAOC,CAAAA,YAAP,KAAyB,8BAAzB,C,6IAIA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAAC,MAAM,CAAI,CACzB,OAAQA,MAAR,EACE,IAAK,QAAL,CAAe,MAAO,OAAP,CAEf,QAAS,MAAO,OAAP,CAHX,CAKD,CAND,CAOA,GAAMC,CAAAA,MAAM,CAAG,CAAC,sBAAD,CAAwB,YAAxB,CAAsC,aAAtC,CAAqD,UAArD,CAAiE,SAAjE,CAAf,CAGA,GAAMC,CAAAA,yBAAyB,CAAG,QAA5BA,CAAAA,yBAA4B,EAAM,CACtC,GAAMC,CAAAA,OAAO,CAAGb,UAAU,EAA1B,CAGA,cAAsCnB,QAAQ,CAAC,CAAD,CAA9C,wCAAOiC,WAAP,eAAoBC,cAApB,eACA,eAAoClC,QAAQ,CAAC,EAAD,CAA5C,yCAAOmC,UAAP,eAAmBC,aAAnB,eACA,eAA8BpC,QAAQ,CAAC,CAAD,CAAtC,yCAAOqC,OAAP,eAAgBC,UAAhB,eACA,eAA0BtC,QAAQ,EAAlC,yCAAOuC,KAAP,eAAcC,QAAd,eACA,eAA8CxC,QAAQ,EAAtD,0CAAOyC,eAAP,gBAAwBC,kBAAxB,gBACA,gBAAmC1C,QAAQ,CAAC,EAAD,CAA3C,2CAAO2C,YAAP,gBAAqBC,UAArB,gBAEA7C,SAAS,CAAC,UAAI,CACZ,GAAI,CAAC4C,YAAL,CACAnB,UAAU,OAAV,EAAAA,UAAU,SAAV,QAAAA,UAAU,CAAEqB,sBAAZ,CAAmCV,UAAnC,CAA+CF,WAAW,CAAE,CAA5D,EAA+Da,IAA/D,CAAoE,SAAAC,GAAG,CAAE,CACvE,GAAMC,CAAAA,IAAI,CAAGD,GAAH,SAAGA,GAAH,iBAAGA,GAAG,CAAEC,IAAlB,CACA,SAA0BA,IAAI,EAAI,EAAlC,CAAOC,KAAP,MAAOA,KAAP,CAAcC,QAAd,MAAcA,QAAd,CACA,GAAIH,GAAJ,SAAIA,GAAJ,iBAAIA,GAAG,CAAEI,OAAT,CAAiB,CACfT,kBAAkB,CAACO,KAAD,CAAlB,CACAT,QAAQ,CAACU,QAAD,SAACA,QAAD,iBAACA,QAAQ,CAAEX,KAAX,CAAR,CACD,CACF,CAPD,EAQA;AACD,CAXQ,CAWP,CAACJ,UAAD,CAAaF,WAAb,CAXO,CAAT,CAaAlC,SAAS,CAAC,UAAM,CACd,GAAI0C,eAAJ,CAAqB,CACnB,GAAIW,CAAAA,GAAG,CAAG/B,eAAe,CAACkB,KAAD,CAAQJ,UAAR,CAAzB,CACAG,UAAU,CAACc,GAAD,CAAV,CACD,CACD;AACD,CANQ,CAMN,CAACb,KAAD,CAAQJ,UAAR,CANM,CAAT,CAQA,GAAMkB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAC,CAAC,CAAI,CACxB,GAAIC,CAAAA,KAAK,CAAGD,CAAC,CAACE,MAAF,CAASD,KAAT,CAAeE,WAAf,EAAZ,CACAb,UAAU,CAACW,KAAD,CAAV,CACD,CAHD,CAKA,GAAMG,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CACxBlC,UAAU,CAACqB,sBAAX,CAAkCV,UAAlC,CAA8CF,WAAW,CAAC,CAA1D,CAA6DU,YAAY,CAACgB,IAAb,EAA7D,EAAkFb,IAAlF,CAAuF,SAAAC,GAAG,CAAE,CAC1F,GAAIA,GAAG,CAACI,OAAR,CAAgB,oBACd,GAAMH,CAAAA,IAAI,CAAGD,GAAH,SAAGA,GAAH,iBAAGA,GAAG,CAAEC,IAAlB,CACAN,kBAAkB,CAACM,IAAD,SAACA,IAAD,iBAACA,IAAI,CAAEC,KAAP,CAAlB,CACAT,QAAQ,CAACQ,IAAD,SAACA,IAAD,iCAACA,IAAI,CAAEE,QAAP,yCAAC,eAAgBX,KAAjB,CAAR,CACAL,cAAc,CAAC,CAAD,CAAd,CACD,CACF,CAPD,EAQH,CATD,CAWA,GAAM0B,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,IAAD,CAAU,CAC7BzB,aAAa,CAACyB,IAAD,SAACA,IAAD,iBAACA,IAAI,CAAEN,KAAP,CAAb,CACD,CAFD,CAGA,GAAMO,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,KAAD,CAAW,CAChC,GAAIA,KAAK,CAACC,GAAN,GAAc,OAAlB,CAA2B,CACzBN,aAAa,GACd,CACF,CAJD,CAOA,GAAMO,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,EAAK,CAChCjC,OAAO,CAACkC,IAAR,CAAa,6DAAb,EACD,CAFD,CAGA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACN,IAAD,CAAU,CAClC7B,OAAO,CAACkC,IAAR,CAAa,iEAAkEL,IAAlE,SAAkEA,IAAlE,iBAAkEA,IAAI,CAAEO,EAAxE,CAAb,EACD,CAFD,CAGA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACR,IAAD,CAAU,CAC9B7B,OAAO,CAACkC,IAAR,CAAa,kCAAmCL,IAAnC,SAAmCA,IAAnC,iBAAmCA,IAAI,CAAEO,EAAzC,CAAb,EACD,CAFD,CAIA,mBACE,wCACE,KAAC,QAAD,EAAU,KAAK,CAAE,uBAAjB,EADF,cAEE,MAAC,IAAD,EAAM,SAAS,CAAE,UAAjB,wBACE,KAAC,IAAD,EAAO,SAAS,CAAC,6CAAjB,uBACE,MAAC,WAAD,EAAa,SAAS,CAAC,MAAvB,wBACE,KAAC,MAAD,EACQ,SAAS,CAAC,cADlB,CAEQ,IAAI,CAAC,MAFb,CAEoB,WAAW,CAAC,yBAFhC,CAEuD,YAAY,CAAC,QAFpE,CAGQ,QAAQ,CAAEf,YAHlB,CAIQ,KAAK,CAAEV,YAJf,CAKQ,UAAU,CAAEmB,cALpB,EADF,cAQE,eAAQ,SAAS,CAAC,mDAAlB,CACQ,OAAO,CAAEJ,aADjB,uBAEE,KAAC,KAAD,EAAO,OAAO,CAAEnC,OAAO,CAAC+C,SAAxB,CAAmC,IAAI,CAAE,IAAzC,CAA8C,KAAK,CAAE,CAACC,MAAM,CAAE,CAAT,CAArD,EAFF,EARF,GADF,EADF,cAgBE,KAAC,IAAD,EAAO,SAAS,CAAC,eAAjB,uBACE,YAAK,SAAS,CAAC,+DAAf,uBAEE,KAAC,KAAD,EAAO,EAAE,CAAC,6DAAV,uBACE,eAAQ,SAAS,CAAC,sBAAlB,CAA0C,OAAO,CAAEN,oBAAnD,sCADF,EAFF,EADF,EAhBF,GAFF,cA6BE,KAAC,IAAD,EAAM,SAAS,CAAE,yBAAjB,uBACE,KAAC,IAAD,wBACE,KAAC,KAAD,wBACE,KAAC,SAAD,wBACE,KAAC,UAAD,EACE,KAAK,CAAGxB,eADV,CAEE,MAAM,CAAEX,MAFV,CAGE,YAAY,CAAE,EAHhB,CAIE,WAAW,CAAI,CACb,uBACE,4BAAC+B,IAAD,qBACE,WAAI,SAAS,CAAC,oBAAd,CAAmC,KAAK,CAAEA,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEW,IAAhD,uBACE,wBAASX,IAAT,SAASA,IAAT,iBAASA,IAAI,CAAEW,IAAf,EADF,EADF,EAFW,CAOb,aACE,mBAACX,IAAD,qBACE,WAAI,KAAK,CAAE,CAACY,aAAa,CAAE,QAAhB,CAAX,uBACM,KAAC,OAAD,EAAS,SAAS,CAAE,MAApB,CAA4B,KAAK,CAAE,SAAnC,CAA8C,OAAO,CAAE,IAAvD,CAA6D,QAAQ,CAAE,KAAvE,CACS,OAAO,CAAE,CAAAZ,IAAI,OAAJ,EAAAA,IAAI,SAAJ,QAAAA,IAAI,CAAEhC,MAAN,IAAiB,CAAjB,CAAqB,IAArB,CAA4B,KAD9C,CACsD,QAAQ,KAD9D,EADN,EADF,EARW,CAcb,cACE,mBAACgC,IAAD,qBACE,WAAI,KAAK,CAAE,CAACY,aAAa,CAAE,QAAhB,CAAX,UACG,CAAAZ,IAAI,OAAJ,EAAAA,IAAI,SAAJ,QAAAA,IAAI,CAAEa,aAAN,EAAsB,CAAtB,eACC,kCACE,KAAC,KAAD,EAAO,SAAS,CAAC,OAAjB,CAAyB,OAAO,CAAE,yBAAIL,CAAAA,aAAa,CAACR,IAAD,CAAjB,EAAlC,UACGA,IADH,SACGA,IADH,iBACGA,IAAI,CAAEa,aADT,EADF,EAFJ,EADF,EAfW,CA0Bb,WACE,iBAACb,IAAD,qBACE,WAAI,KAAK,CAAE,CAACY,aAAa,CAAE,QAAhB,CAAX,uBACE,UAAG,KAAK,CAAE,CAACE,YAAY,CAAE,KAAf,CAAV,UAAkCvD,gBAAgB,CAACyC,IAAD,SAACA,IAAD,iBAACA,IAAI,CAAEe,UAAP,CAAlD,EADF,EADF,EA3BW,CAgCb,UACE,gBAACf,IAAD,qBACE,iCACE,KAAC,MAAD,EAAQ,KAAK,CAAEjC,QAAQ,CAACiC,IAAI,CAAChC,MAAN,CAAvB,uBACE,MAAC,OAAD,EAAS,KAAK,KAAd,CAAe,KAAK,CAAC,MAArB,CAA4B,OAAO,CAAE,yBAAIsC,CAAAA,iBAAiB,CAACN,IAAD,CAArB,EAArC,wBACE,KAAC,IAAD,EAAM,GAAG,CAAEnC,WAAW,CAACmD,IAAvB,CAA6B,GAAG,CAAC,MAAjC,EADF,kBAC4C,aAAM,SAAS,CAAC,MAAhB,iCAD5C,GADF,EADF,EADF,EAjCW,CAJjB,EADF,EADF,EADF,EADF,EA7BF,cAqFE,aAAK,SAAS,CAAC,uDAAf,wBACE,MAAC,SAAD,EAAW,SAAS,CAAC,WAArB,CAAiC,KAAK,CAAE,CAAEC,KAAK,CAAE,OAAT,CAAxC,wBACE,KAAC,eAAD,EAAiB,KAAK,CAAC,SAAvB,CAAiC,SAAS,CAAC,uCAA3C,uBACE,aAAM,SAAS,CAAC,MAAhB,CAAuB,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAT,CAA9B,UAAiD5C,UAAU,CAAG,OAA9D,EADF,EADF,cAIE,KAAC,aAAD,WACG6C,cAAc,EAAI,CAACA,cAAc,EAAI,EAAnB,EAAuBC,GAAvB,CAA2B,SAACpB,IAAD,CAAOqB,KAAP,CAAiB,CAC7D,mBACE,KAAC,aAAD,EAA2B,OAAO,CAAE,yBAAItB,CAAAA,YAAY,CAACC,IAAD,CAAhB,EAApC,UAA6DA,IAA7D,SAA6DA,IAA7D,iBAA6DA,IAAI,CAAEW,IAAnE,EAAoBU,KAApB,CADF,CAGD,CAJkB,CADrB,EAJF,GADF,cAcE,KAAC,WAAD,EACE,UAAU,CAAE,KADd,CAEE,cAAc,CAAE,OAFlB,CAGE,UAAU,CAAEjD,WAHd,CAIE,KAAK,CAAEI,OAJT,CAKE,kBAAkB,CAAEH,cALtB,EAdF,GArFF,GADF,CA8GD,CAlLD,CAmLA,GAAM8C,CAAAA,cAAc,CAAG,CACrB,CAAEZ,EAAE,CAAE,CAAN,CAASI,IAAI,CAAE,QAAf,CAAyBjB,KAAK,CAAE,CAAhC,CADqB,CAErB,CAAEa,EAAE,CAAE,CAAN,CAASI,IAAI,CAAE,SAAf,CAA0BjB,KAAK,CAAE,EAAjC,CAFqB,CAGrB,CAAEa,EAAE,CAAE,CAAN,CAASI,IAAI,CAAE,SAAf,CAA0BjB,KAAK,CAAE,EAAjC,CAHqB,CAAvB,CAKA,cAAexB,CAAAA,yBAAf","sourcesContent":["import React, {useEffect, useState} from 'react'\nimport {\n  CBadge, CButton,\n  CCard,\n  CCardBody,\n  CCol,\n  CDataTable, CDropdown, CDropdownItem, CDropdownMenu, CDropdownToggle, CImg, CInput, CInputGroup,\n  CLink, CPagination,\n  CRow, CSwitch\n} from '@coreui/react'\n\nimport CIcon from \"@coreui/icons-react\";\nimport {useHistory} from 'react-router-dom';\nimport {parsedTimeCreate, parsedPageLimit, handleLocalStorage} from \"../../../helpers/common\";\nimport {freeSet} from \"@coreui/icons\";\nimport contentApi from \"../../../apis/contentApi\";\nimport TitleAds from \"../../instream-ads/TitleAds/TitleAds\";\nimport ConfigImage from \"../../../config/ConfigImage\";\nimport LocalStorage from \"../../../config/LocalStorage\";\n\n\n\nconst getBadge = status => {\n  switch (status) {\n    case 'Active': return 'white'\n\n    default: return 'white'\n  }\n}\nconst fields = ['Tên Content Provider','Trạng Thái', 'Số Nội Dung', 'Ngày Tạo', 'Quản lý']\n\n\nconst TablesContentProviderList = () => {\n  const history = useHistory()\n\n\n  const [currentPage, setCurrentPage] = useState(1);\n  const [rowPerPage, setRowPerPage] = useState(10);\n  const [maxPage, setMaxPage] = useState(1);\n  const [total, setTotal] = useState()\n  const [currentPageList, setCurrentPageList] = useState()\n  const [valueKeyword, setKeyword] = useState('')\n\n  useEffect(()=>{\n    if (!valueKeyword)\n    contentApi?.getListContentProvider(rowPerPage, currentPage -1).then(res=>{\n      const data = res?.data\n      const {items, metadata} = data || {}\n      if (res?.success){\n        setCurrentPageList(items)\n        setTotal(metadata?.total)\n      }\n    })\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  },[rowPerPage, currentPage])\n\n  useEffect(() => {\n    if (currentPageList) {\n      let max = parsedPageLimit(total, rowPerPage)\n      setMaxPage(max)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [total, rowPerPage])\n\n  const handleChange = e => {\n    let value = e.target.value.toLowerCase()\n    setKeyword(value)\n  }\n\n  const onClickSearch = () => {\n      contentApi.getListContentProvider(rowPerPage, currentPage-1, valueKeyword.trim()).then(res=>{\n        if (res.success){\n          const data = res?.data\n          setCurrentPageList(data?.items)\n          setTotal(data?.metadata?.total)\n          setCurrentPage(1)\n        }\n      })\n  }\n\n  const onChangePage = (item) => {\n    setRowPerPage(item?.value)\n  }\n  const handleKeyPress = (event) => {\n    if (event.key === 'Enter') {\n      onClickSearch();\n    }\n  }\n\n\n  const onAddContentProvider = () =>{\n    history.push('/instream-ads/content-provider-list/create-content-provider')\n  }\n  const onEditContentItem = (item) => {\n    history.push('/instream-ads/content-provider-list/edit-content-provider?id=' + item?.id)\n  }\n  const handleContent = (item) => {\n    history.push('/instream-ads/content-list?id=' + item?.id)\n  }\n\n  return (\n    <>\n      <TitleAds title={\"Content Provider List\"}/>\n      <CRow className={'row mx-0'}>\n        <CCol  className=\"col-sm-6 form-inline p-0 c-datatable-filter\">\n          <CInputGroup className=\"mb-3\">\n            <CInput\n                    className=\"input-search\"\n                    type=\"text\" placeholder=\"Tìm Content Provider\" autoComplete=\"search\"\n                    onChange={handleChange}\n                    value={valueKeyword}\n                    onKeyPress={handleKeyPress}\n            />\n            <button className=\"btn btn-square btn-default color-black btn-search\"\n                    onClick={onClickSearch}>\n              <CIcon content={freeSet.cilSearch} size={'lg'}style={{margin: 0}} />\n            </button>\n          </CInputGroup>\n        </CCol>\n        <CCol  className=\"col-sm-6 p-0 \">\n          <div className=\"form-inline justify-content-sm-end c-datatable-items-per-page\">\n\n            <CLink to=\"/instream-ads/content-provider-list/create-content-provider\">\n              <button className=\"btn btn-success mb-3\"  onClick={onAddContentProvider}>\n                Thêm Content Provider\n              </button>\n            </CLink>\n          </div>\n        </CCol>\n      </CRow>\n      <CRow className={'justify-content-between'}>\n        <CCol>\n          <CCard>\n            <CCardBody>\n              <CDataTable\n                items={ currentPageList}\n                fields={fields}\n                itemsPerPage={10}\n                scopedSlots = {{\n                  'Tên Content Provider':\n                    (item)=>(\n                      <td className=\"text-name-provider\" title={item?.name}>\n                        <strong>{item?.name}</strong>\n                      </td>\n                    ),\n                  'Trạng Thái':\n                    (item)=>(\n                      <td style={{verticalAlign: \"middle\"}}>\n                            <CSwitch className={'mx-1'} color={'success'} labelOn={'ON'} labelOff={'OFF'}\n                                     checked={item?.status === 1 ? true : false } readOnly/>\n                      </td>\n                    ),\n                  'Số Nội Dung':\n                    (item)=>(\n                      <td style={{verticalAlign: \"middle\"}}>\n                        {item?.total_content > 0 &&\n                          <div>\n                            <CLink className=\"clink\" onClick={()=>handleContent(item)}>\n                              {item?.total_content}\n                            </CLink>\n                          </div>\n                        }\n                      </td>\n                    ),\n                  'Ngày Tạo':\n                    (item)=>(\n                      <td style={{verticalAlign: \"middle\"}}>\n                        <p style={{marginBottom: \"0px\"}}>{parsedTimeCreate(item?.created_at)}</p>\n                      </td>\n                    ),\n                  'Quản lý':\n                    (item)=>(\n                      <td>\n                        <CBadge color={getBadge(item.status)}>\n                          <CButton block color=\"info\" onClick={()=>onEditContentItem(item)}>\n                            <CImg src={ConfigImage.edit} alt=\"edit\"/> <span className=\"ml-1\">Chỉnh sửa</span>\n                          </CButton>\n                        </CBadge>\n                      </td>\n                    ),\n                }}\n              />\n            </CCardBody>\n          </CCard>\n        </CCol>\n      </CRow>\n      <div className=\"m-1 d-flex justify-content-between align-items-center\">\n        <CDropdown className=\"btn-group\" style={{ width: '100px',  }}>\n          <CDropdownToggle color=\"default\" className='shadow-none mb-2 row-page color-white'>\n            <span className=\"mr-2\" style={{ color: '#222'}}>{rowPerPage + ' dòng'}</span>\n          </CDropdownToggle>\n          <CDropdownMenu>\n            {rowPerPageList && (rowPerPageList || []).map((item, index) => {\n              return (\n                <CDropdownItem key={index} onClick={()=>onChangePage(item)}>{item?.name}</CDropdownItem>\n              )\n            })\n            }\n          </CDropdownMenu>\n        </CDropdown>\n        <CPagination\n          nextButton={'Sau'}\n          previousButton={'Trước'}\n          activePage={currentPage}\n          pages={maxPage}\n          onActivePageChange={setCurrentPage}\n        />\n      </div>\n    </>\n  )\n}\nconst rowPerPageList = [\n  { id: 1, name: '5 dòng', value: 5 },\n  { id: 2, name: '10 dòng', value: 10 },\n  { id: 3, name: '20 dòng', value: 20 },\n]\nexport default TablesContentProviderList\n"]},"metadata":{},"sourceType":"module"}